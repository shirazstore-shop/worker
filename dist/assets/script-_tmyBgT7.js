(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();var Se={},lt=Object.defineProperty,ct=Object.defineProperties,dt=Object.getOwnPropertyDescriptors,_e=Object.getOwnPropertySymbols,ut=Object.prototype.hasOwnProperty,ht=Object.prototype.propertyIsEnumerable,ke=(t,e,n)=>e in t?lt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,O=(t,e)=>{for(var n in e||(e={}))ut.call(e,n)&&ke(t,n,e[n]);if(_e)for(var n of _e(e))ht.call(e,n)&&ke(t,n,e[n]);return t},M=(t,e)=>ct(t,dt(e)),pt=class extends Error{constructor(t,e,n){super(e||t.toString(),{cause:n}),this.status=t,this.statusText=e,this.error=n}},mt=async(t,e)=>{var n,s,o,i,r,l;let a=e||{};const c={onRequest:[e?.onRequest],onResponse:[e?.onResponse],onSuccess:[e?.onSuccess],onError:[e?.onError],onRetry:[e?.onRetry]};if(!e||!(e!=null&&e.plugins))return{url:t,options:a,hooks:c};for(const d of e?.plugins||[]){if(d.init){const h=await((n=d.init)==null?void 0:n.call(d,t.toString(),e));a=h.options||a,t=h.url}c.onRequest.push((s=d.hooks)==null?void 0:s.onRequest),c.onResponse.push((o=d.hooks)==null?void 0:o.onResponse),c.onSuccess.push((i=d.hooks)==null?void 0:i.onSuccess),c.onError.push((r=d.hooks)==null?void 0:r.onError),c.onRetry.push((l=d.hooks)==null?void 0:l.onRetry)}return{url:t,options:a,hooks:c}},Ie=class{constructor(t){this.options=t}shouldAttemptRetry(t,e){return this.options.shouldRetry?Promise.resolve(t<this.options.attempts&&this.options.shouldRetry(e)):Promise.resolve(t<this.options.attempts)}getDelay(){return this.options.delay}},gt=class{constructor(t){this.options=t}shouldAttemptRetry(t,e){return this.options.shouldRetry?Promise.resolve(t<this.options.attempts&&this.options.shouldRetry(e)):Promise.resolve(t<this.options.attempts)}getDelay(t){return Math.min(this.options.maxDelay,this.options.baseDelay*2**t)}};function ft(t){if(typeof t=="number")return new Ie({type:"linear",attempts:t,delay:1e3});switch(t.type){case"linear":return new Ie(t);case"exponential":return new gt(t);default:throw new Error("Invalid retry strategy")}}var wt=async t=>{const e={},n=async s=>typeof s=="function"?await s():s;if(t!=null&&t.auth){if(t.auth.type==="Bearer"){const s=await n(t.auth.token);if(!s)return e;e.authorization=`Bearer ${s}`}else if(t.auth.type==="Basic"){const s=n(t.auth.username),o=n(t.auth.password);if(!s||!o)return e;e.authorization=`Basic ${btoa(`${s}:${o}`)}`}else if(t.auth.type==="Custom"){const s=n(t.auth.value);if(!s)return e;e.authorization=`${n(t.auth.prefix)} ${s}`}}return e},yt=/^application\/(?:[\w!#$%&*.^`~-]*\+)?json(;.+)?$/i;function bt(t){const e=t.headers.get("content-type"),n=new Set(["image/svg","application/xml","application/xhtml","application/html"]);if(!e)return"json";const s=e.split(";").shift()||"";return yt.test(s)?"json":n.has(s)||s.startsWith("text/")?"text":"blob"}function vt(t){try{return JSON.parse(t),!0}catch{return!1}}function Fe(t){if(t===void 0)return!1;const e=typeof t;return e==="string"||e==="number"||e==="boolean"||e===null?!0:e!=="object"?!1:Array.isArray(t)?!0:t.buffer?!1:t.constructor&&t.constructor.name==="Object"||typeof t.toJSON=="function"}function xe(t){try{return JSON.parse(t)}catch{return t}}function Le(t){return typeof t=="function"}function Et(t){if(t!=null&&t.customFetchImpl)return t.customFetchImpl;if(typeof globalThis<"u"&&Le(globalThis.fetch))return globalThis.fetch;if(typeof window<"u"&&Le(window.fetch))return window.fetch;throw new Error("No fetch implementation found")}async function Ct(t){const e=new Headers(t?.headers),n=await wt(t);for(const[s,o]of Object.entries(n||{}))e.set(s,o);if(!e.has("content-type")){const s=St(t?.body);s&&e.set("content-type",s)}return e}function St(t){return Fe(t)?"application/json":null}function _t(t){if(!(t!=null&&t.body))return null;const e=new Headers(t?.headers);if(Fe(t.body)&&!e.has("content-type")){for(const[n,s]of Object.entries(t?.body))s instanceof Date&&(t.body[n]=s.toISOString());return JSON.stringify(t.body)}return t.body}function kt(t,e){var n;if(e!=null&&e.method)return e.method.toUpperCase();if(t.startsWith("@")){const s=(n=t.split("@")[1])==null?void 0:n.split("/")[0];return We.includes(s)?s.toUpperCase():e!=null&&e.body?"POST":"GET"}return e!=null&&e.body?"POST":"GET"}function It(t,e){let n;return!(t!=null&&t.signal)&&t!=null&&t.timeout&&(n=setTimeout(()=>e?.abort(),t?.timeout)),{abortTimeout:n,clearTimeout:()=>{n&&clearTimeout(n)}}}var xt=class He extends Error{constructor(e,n){super(n||JSON.stringify(e,null,2)),this.issues=e,Object.setPrototypeOf(this,He.prototype)}};async function oe(t,e){let n=await t["~standard"].validate(e);if(n.issues)throw new xt(n.issues);return n.value}var We=["get","post","put","patch","delete"],Lt=t=>({id:"apply-schema",name:"Apply Schema",version:"1.0.0",async init(e,n){var s,o,i,r;const l=((o=(s=t.plugins)==null?void 0:s.find(a=>{var c;return(c=a.schema)!=null&&c.config?e.startsWith(a.schema.config.baseURL||"")||e.startsWith(a.schema.config.prefix||""):!1}))==null?void 0:o.schema)||t.schema;if(l){let a=e;(i=l.config)!=null&&i.prefix&&a.startsWith(l.config.prefix)&&(a=a.replace(l.config.prefix,""),l.config.baseURL&&(e=e.replace(l.config.prefix,l.config.baseURL))),(r=l.config)!=null&&r.baseURL&&a.startsWith(l.config.baseURL)&&(a=a.replace(l.config.baseURL,""));const c=l.schema[a];if(c){let d=M(O({},n),{method:c.method,output:c.output});return n!=null&&n.disableValidation||(d=M(O({},d),{body:c.input?await oe(c.input,n?.body):n?.body,params:c.params?await oe(c.params,n?.params):n?.params,query:c.query?await oe(c.query,n?.query):n?.query})),{url:e,options:d}}}return{url:e,options:n}}}),Rt=t=>{async function e(n,s){const o=M(O(O({},t),s),{plugins:[...t?.plugins||[],Lt(t||{})]});if(t!=null&&t.catchAllError)try{return await fe(n,o)}catch(i){return{data:null,error:{status:500,statusText:"Fetch Error",message:"Fetch related error. Captured by catchAllError option. See error property for more details.",error:i}}}return await fe(n,o)}return e};function Tt(t,e){let{baseURL:n,params:s,query:o}=e||{query:{},params:{},baseURL:""},i=t.startsWith("http")?t.split("/").slice(0,3).join("/"):n||"";if(t.startsWith("@")){const d=t.toString().split("@")[1].split("/")[0];We.includes(d)&&(t=t.replace(`@${d}/`,"/"))}i.endsWith("/")||(i+="/");let[r,l]=t.replace(i,"").split("?");const a=new URLSearchParams(l);for(const[d,h]of Object.entries(o||{}))h!=null&&a.set(d,String(h));if(s)if(Array.isArray(s)){const d=r.split("/").filter(h=>h.startsWith(":"));for(const[h,m]of d.entries()){const g=s[h];r=r.replace(m,g)}}else for(const[d,h]of Object.entries(s))r=r.replace(`:${d}`,String(h));r=r.split("/").map(encodeURIComponent).join("/"),r.startsWith("/")&&(r=r.slice(1));let c=a.toString();return c=c.length>0?`?${c}`.replace(/\+/g,"%20"):"",i.startsWith("http")?new URL(`${r}${c}`,i):`${i}${r}${c}`}var fe=async(t,e)=>{var n,s,o,i,r,l,a,c;const{hooks:d,url:h,options:m}=await mt(t,e),g=Et(m),E=new AbortController,w=(n=m.signal)!=null?n:E.signal,p=Tt(h,m),y=_t(m),C=await Ct(m),b=kt(h,m);let f=M(O({},m),{url:p,headers:C,body:y,method:b,signal:w});for(const L of d.onRequest)if(L){const I=await L(f);I instanceof Object&&(f=I)}("pipeTo"in f&&typeof f.pipeTo=="function"||typeof((s=e?.body)==null?void 0:s.pipe)=="function")&&("duplex"in f||(f.duplex="half"));const{clearTimeout:_}=It(m,E);let v=await g(f.url,f);_();const R={response:v,request:f};for(const L of d.onResponse)if(L){const I=await L(M(O({},R),{response:(o=e?.hookOptions)!=null&&o.cloneResponse?v.clone():v}));I instanceof Response?v=I:I instanceof Object&&(v=I.response)}if(v.ok){if(f.method==="HEAD")return{data:"",error:null};const L=bt(v),I={data:"",response:v,request:f};if(L==="json"||L==="text"){const F=await v.text(),H=await((i=f.jsonParser)!=null?i:xe)(F);I.data=H}else I.data=await v[L]();f!=null&&f.output&&f.output&&!f.disableValidation&&(I.data=await oe(f.output,I.data));for(const F of d.onSuccess)F&&await F(M(O({},I),{response:(r=e?.hookOptions)!=null&&r.cloneResponse?v.clone():v}));return e!=null&&e.throw?I.data:{data:I.data,error:null}}const Q=(l=e?.jsonParser)!=null?l:xe,G=await v.text(),Y=vt(G),S=Y?await Q(G):null,ae={response:v,responseText:G,request:f,error:M(O({},S),{status:v.status,statusText:v.statusText})};for(const L of d.onError)L&&await L(M(O({},ae),{response:(a=e?.hookOptions)!=null&&a.cloneResponse?v.clone():v}));if(e!=null&&e.retry){const L=ft(e.retry),I=(c=e.retryAttempt)!=null?c:0;if(await L.shouldAttemptRetry(I,v)){for(const H of d.onRetry)H&&await H(R);const F=L.getDelay(I);return await new Promise(H=>setTimeout(H,F)),await fe(t,M(O({},e),{retryAttempt:I+1}))}}if(e!=null&&e.throw)throw new pt(v.status,v.statusText,Y?S:G);return{data:null,error:M(O({},S),{status:v.status,statusText:v.statusText})}};const ie=Object.create(null),K=t=>{var e,n;return((e=globalThis.process)==null?void 0:e.env)||((n=globalThis.Deno)==null?void 0:n.env.toObject())||globalThis.__env__||(t?ie:globalThis)},P=new Proxy(ie,{get(t,e){return K()[e]??ie[e]},has(t,e){const n=K();return e in n||e in ie},set(t,e,n){const s=K(!0);return s[e]=n,!0},deleteProperty(t,e){if(!e)return!1;const n=K(!0);return delete n[e],!0},ownKeys(){const t=K(!0);return Object.keys(t)}});function k(t,e){return typeof process<"u"&&Se?Se[t]??e:typeof Deno<"u"?Deno.env.get(t)??e:typeof Bun<"u"?Bun.env[t]??e:e}const X=1,x=4,U=8,T=24,Re={eterm:x,cons25:x,console:x,cygwin:x,dtterm:x,gnome:x,hurd:x,jfbterm:x,konsole:x,kterm:x,mlterm:x,mosh:T,putty:x,st:x,"rxvt-unicode-24bit":T,terminator:T,"xterm-kitty":T},Pt=new Map(Object.entries({APPVEYOR:U,BUILDKITE:U,CIRCLECI:T,DRONE:U,GITEA_ACTIONS:T,GITHUB_ACTIONS:T,GITLAB_CI:U,TRAVIS:U})),Nt=[/ansi/,/color/,/linux/,/direct/,/^con[0-9]*x[0-9]/,/^rxvt/,/^screen/,/^xterm/,/^vt100/,/^vt220/];function At(){if(k("FORCE_COLOR")!==void 0)switch(k("FORCE_COLOR")){case"":case"1":case"true":return x;case"2":return U;case"3":return T;default:return X}if(k("NODE_DISABLE_COLORS")!==void 0&&k("NODE_DISABLE_COLORS")!==""||k("NO_COLOR")!==void 0&&k("NO_COLOR")!==""||k("TERM")==="dumb")return X;if(k("TMUX"))return T;if("TF_BUILD"in P&&"AGENT_NAME"in P)return x;if("CI"in P){for(const{0:t,1:e}of Pt)if(t in P)return e;return k("CI_NAME")==="codeship"?U:X}if("TEAMCITY_VERSION"in P)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.exec(k("TEAMCITY_VERSION"))!==null?x:X;switch(k("TERM_PROGRAM")){case"iTerm.app":return!k("TERM_PROGRAM_VERSION")||/^[0-2]\./.exec(k("TERM_PROGRAM_VERSION"))!==null?U:T;case"HyperTerm":case"MacTerm":return T;case"Apple_Terminal":return U}if(k("COLORTERM")==="truecolor"||k("COLORTERM")==="24bit")return T;if(k("TERM")){if(/truecolor/.exec(k("TERM"))!==null)return T;if(/^xterm-256/.exec(k("TERM"))!==null)return U;const t=k("TERM").toLowerCase();if(Re[t])return Re[t];if(Nt.some(e=>e.exec(t)!==null))return x}return k("COLORTERM")?x:X}const D={reset:"\x1B[0m",bright:"\x1B[1m",dim:"\x1B[2m",fg:{red:"\x1B[31m",green:"\x1B[32m",yellow:"\x1B[33m",blue:"\x1B[34m",magenta:"\x1B[35m"}},we=["info","success","warn","error","debug"];function Ot(t,e){return we.indexOf(e)<=we.indexOf(t)}const Mt={info:D.fg.blue,success:D.fg.green,warn:D.fg.yellow,error:D.fg.red,debug:D.fg.magenta},Ut=(t,e,n)=>{const s=new Date().toISOString();return n?`${D.dim}${s}${D.reset} ${Mt[t]}${t.toUpperCase()}${D.reset} ${D.bright}[Better Auth]:${D.reset} ${e}`:`${s} ${t.toUpperCase()} [Better Auth]: ${e}`},Dt=t=>{const e="error",n=At()!==1,s=(o,i,r=[])=>{if(!Ot(e,o))return;const l=Ut(o,i,n);{o==="error"?console.error(l,...r):o==="warn"?console.warn(l,...r):console.log(l,...r);return}};return{...Object.fromEntries(we.map(o=>[o,(...[i,...r])=>s(o,i,r)])),get level(){return e}}};Dt();class Bt extends Error{constructor(e,n){super(e),this.name="BetterAuthError",this.message=e,this.cause=n,this.stack=""}}function $t(t){try{return(new URL(t).pathname.replace(/\/+$/,"")||"/")!=="/"}catch{throw new Bt(`Invalid base URL: ${t}. Please provide a valid base URL.`)}}function le(t,e="/api/auth"){if($t(t))return t;const n=t.replace(/\/+$/,"");return!e||e==="/"?n:(e=e.startsWith("/")?e:`/${e}`,`${n}${e}`)}function Vt(t,e,n,s){if(t)return le(t,e);{const o=P.BETTER_AUTH_URL||P.NEXT_PUBLIC_BETTER_AUTH_URL||P.PUBLIC_BETTER_AUTH_URL||P.NUXT_PUBLIC_BETTER_AUTH_URL||P.NUXT_PUBLIC_AUTH_URL||(P.BASE_URL!=="/"?P.BASE_URL:void 0);if(o)return le(o,e)}if(typeof window<"u"&&window.location)return le(window.location.origin,e)}let N=[],V=0;const ee=4;let ze=t=>{let e=[],n={get(){return n.lc||n.listen(()=>{})(),n.value},lc:0,listen(s){return n.lc=e.push(s),()=>{for(let i=V+ee;i<N.length;)N[i]===s?N.splice(i,ee):i+=ee;let o=e.indexOf(s);~o&&(e.splice(o,1),--n.lc||n.off())}},notify(s,o){let i=!N.length;for(let r of e)N.push(r,n.value,s,o);if(i){for(V=0;V<N.length;V+=ee)N[V](N[V+1],N[V+2],N[V+3]);N.length=0}},off(){},set(s){let o=n.value;o!==s&&(n.value=s,n.notify(o))},subscribe(s){let o=n.listen(s);return s(n.value),o},value:t};return n};const jt=5,te=6,ne=10;let qt=(t,e,n,s)=>(t.events=t.events||{},t.events[n+ne]||(t.events[n+ne]=s(o=>{t.events[n].reduceRight((i,r)=>(r(i),i),{shared:{},...o})})),t.events[n]=t.events[n]||[],t.events[n].push(e),()=>{let o=t.events[n],i=o.indexOf(e);o.splice(i,1),o.length||(delete t.events[n],t.events[n+ne](),delete t.events[n+ne])}),Gt=1e3,Ft=(t,e)=>qt(t,n=>{let s=e(n);s&&t.events[te].push(s)},jt,n=>{let s=t.listen;t.listen=(...i)=>(!t.lc&&!t.active&&(t.active=!0,n()),s(...i));let o=t.off;return t.events[te]=[],t.off=()=>{o(),setTimeout(()=>{if(t.active&&!t.lc){t.active=!1;for(let i of t.events[te])i();t.events[te]=[]}},Gt)},()=>{t.listen=s,t.off=o}});const Ht=typeof window>"u",Wt=(t,e,n,s)=>{const o=ze({data:null,error:null,isPending:!0,isRefetching:!1,refetch:l=>i(l)}),i=l=>{const a=typeof s=="function"?s({data:o.get().data,error:o.get().error,isPending:o.get().isPending}):s;n(e,{...a,query:{...a?.query,...l?.query},async onSuccess(c){var d;o.set({data:c.data,error:null,isPending:!1,isRefetching:!1,refetch:o.value.refetch}),await((d=a?.onSuccess)==null?void 0:d.call(a,c))},async onError(c){var d,h;const{request:m}=c,g=typeof m.retry=="number"?m.retry:(d=m.retry)==null?void 0:d.attempts,E=m.retryAttempt||0;g&&E<g||(o.set({error:c.error,data:null,isPending:!1,isRefetching:!1,refetch:o.value.refetch}),await((h=a?.onError)==null?void 0:h.call(a,c)))},async onRequest(c){var d;const h=o.get();o.set({isPending:h.data===null,data:h.data,error:null,isRefetching:!0,refetch:o.value.refetch}),await((d=a?.onRequest)==null?void 0:d.call(a,c))}}).catch(c=>{o.set({error:c,data:null,isPending:!1,isRefetching:!1,refetch:o.value.refetch})})};t=Array.isArray(t)?t:[t];let r=!1;for(const l of t)l.subscribe(()=>{Ht||(r?i():Ft(o,()=>{const a=setTimeout(()=>{r||(i(),r=!0)},0);return()=>{o.off(),l.off(),clearTimeout(a)}}))});return o},zt={proto:/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,constructor:/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,protoShort:/"__proto__"\s*:/,constructorShort:/"constructor"\s*:/},Yt=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/,Te={true:!0,false:!1,null:null,undefined:void 0,nan:Number.NaN,infinity:Number.POSITIVE_INFINITY,"-infinity":Number.NEGATIVE_INFINITY},Kt=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(?:\.(\d{1,7}))?(?:Z|([+-])(\d{2}):(\d{2}))$/;function Xt(t){return t instanceof Date&&!isNaN(t.getTime())}function Jt(t){const e=Kt.exec(t);if(!e)return null;const[,n,s,o,i,r,l,a,c,d,h]=e;let m=new Date(Date.UTC(parseInt(n,10),parseInt(s,10)-1,parseInt(o,10),parseInt(i,10),parseInt(r,10),parseInt(l,10),a?parseInt(a.padEnd(3,"0"),10):0));if(c){const g=(parseInt(d,10)*60+parseInt(h,10))*(c==="+"?-1:1);m.setUTCMinutes(m.getUTCMinutes()+g)}return Xt(m)?m:null}function Zt(t,e={}){const{strict:n=!1,warnings:s=!1,reviver:o,parseDates:i=!0}=e;if(typeof t!="string")return t;const r=t.trim();if(r.length>0&&r[0]==='"'&&r.endsWith('"')&&!r.slice(1,-1).includes('"'))return r.slice(1,-1);const l=r.toLowerCase();if(l.length<=9&&l in Te)return Te[l];if(!Yt.test(r)){if(n)throw new SyntaxError("[better-json] Invalid JSON");return t}if(Object.entries(zt).some(([a,c])=>{const d=c.test(r);return d&&s&&console.warn(`[better-json] Detected potential prototype pollution attempt using ${a} pattern`),d})&&n)throw new Error("[better-json] Potential prototype pollution attempt detected");try{return JSON.parse(r,(a,c)=>{if(a==="__proto__"||a==="constructor"&&c&&typeof c=="object"&&"prototype"in c){s&&console.warn(`[better-json] Dropping "${a}" key to prevent prototype pollution`);return}if(i&&typeof c=="string"){const d=Jt(c);if(d)return d}return o?o(a,c):c})}catch(a){if(n)throw a;return t}}function Qt(t,e={strict:!0}){return Zt(t,e)}const en={id:"redirect",name:"Redirect",hooks:{onSuccess(t){var e,n;if((e=t.data)!=null&&e.url&&(n=t.data)!=null&&n.redirect&&typeof window<"u"&&window.location&&window.location)try{window.location.href=t.data.url}catch{}}}};function tn(t){const e=ze(!1);return{session:Wt(e,"/get-session",t,{method:"GET"}),$sessionSignal:e}}const nn=(t,e)=>{var n,s,o,i,r,l,a;const c="credentials"in Request.prototype,d=Vt(t?.baseURL,t?.basePath)??"/api/auth",h=((n=t?.plugins)==null?void 0:n.flatMap(S=>S.fetchPlugins).filter(S=>S!==void 0))||[],m={id:"lifecycle-hooks",name:"lifecycle-hooks",hooks:{onSuccess:(s=t?.fetchOptions)==null?void 0:s.onSuccess,onError:(o=t?.fetchOptions)==null?void 0:o.onError,onRequest:(i=t?.fetchOptions)==null?void 0:i.onRequest,onResponse:(r=t?.fetchOptions)==null?void 0:r.onResponse}},{onSuccess:g,onError:E,onRequest:w,onResponse:p,...y}=t?.fetchOptions||{},C=Rt({baseURL:d,...c?{credentials:"include"}:{},method:"GET",jsonParser(S){return S?Qt(S,{strict:!1}):null},customFetchImpl:fetch,...y,plugins:[m,...y.plugins||[],...t!=null&&t.disableDefaultFetchPlugins?[]:[en],...h]}),{$sessionSignal:b,session:f}=tn(C),_=t?.plugins||[];let v={},R={$sessionSignal:b,session:f},Q={"/sign-out":"POST","/revoke-sessions":"POST","/revoke-other-sessions":"POST","/delete-user":"POST"};const G=[{signal:"$sessionSignal",matcher(S){return S==="/sign-out"||S==="/update-user"||S.startsWith("/sign-in")||S.startsWith("/sign-up")||S==="/delete-user"||S==="/verify-email"}}];for(const S of _)S.getAtoms&&Object.assign(R,(l=S.getAtoms)==null?void 0:l.call(S,C)),S.pathMethods&&Object.assign(Q,S.pathMethods),S.atomListeners&&G.push(...S.atomListeners);const Y={notify:S=>{R[S].set(!R[S].get())},listen:(S,ae)=>{R[S].subscribe(ae)},atoms:R};for(const S of _)S.getActions&&Object.assign(v,(a=S.getActions)==null?void 0:a.call(S,C,Y,t));return{get baseURL(){return d},pluginsActions:v,pluginsAtoms:R,pluginPathMethods:Q,atomListeners:G,$fetch:C,$store:Y}};function sn(t){return typeof t=="object"&&t!==null&&"get"in t&&typeof t.get=="function"&&"lc"in t&&typeof t.lc=="number"}function on(t,e,n){const s=e[t],{fetchOptions:o,query:i,...r}=n||{};return s||(o!=null&&o.method?o.method:r&&Object.keys(r).length>0?"POST":"GET")}function rn(t,e,n,s,o){function i(r=[]){return new Proxy(function(){},{get(l,a){if(typeof a!="string"||a==="then"||a==="catch"||a==="finally")return;const c=[...r,a];let d=t;for(const h of c)if(d&&typeof d=="object"&&h in d)d=d[h];else{d=void 0;break}return typeof d=="function"||sn(d)?d:i(c)},apply:async(l,a,c)=>{const d="/"+r.map(C=>C.replace(/[A-Z]/g,b=>`-${b.toLowerCase()}`)).join("/"),h=c[0]||{},m=c[1]||{},{query:g,fetchOptions:E,...w}=h,p={...m,...E},y=on(d,n,h);return await e(d,{...p,body:y==="GET"?void 0:{...w,...p?.body||{}},query:g||p?.query,method:y,async onSuccess(C){var b;if(await((b=p?.onSuccess)==null?void 0:b.call(p,C)),!o)return;const f=o.filter(_=>_.matcher(d));if(f.length)for(const _ of f){const v=s[_.signal];if(!v)return;const R=v.get();setTimeout(()=>{v.set(!R)},10)}}})}})}return i()}function an(t){return t.charAt(0).toUpperCase()+t.slice(1)}function ln(t){const{pluginPathMethods:e,pluginsActions:n,pluginsAtoms:s,$fetch:o,atomListeners:i,$store:r}=nn(t);let l={};for(const[c,d]of Object.entries(s))l[`use${an(c)}`]=d;const a={...n,...l,$fetch:o,$store:r};return rn(a,o,e,s,i)}const cn=()=>({id:"anonymous",$InferServerPlugin:{},pathMethods:{"/sign-in/anonymous":"POST"}}),J="__EDGESPARK_CLIENT__";function dn(){const t=globalThis;return t[J]||(t[J]={}),t[J].snapshots||(t[J].snapshots={}),t[J]}function Ye(t){if(typeof window>"u"||typeof fetch>"u"){const e=`[EDGESPARK_CLIENT] ${t} is browser-only. Detected non-browser runtime; run in a browser or provide a client-side environment before calling ${t}.`;throw console.warn(e),new Error(e)}}function un(t,e,n,s){if(e)for(const o of s){const i=n[o],r=e[o];if(!(i===void 0||r===void 0)&&!pn(r,i))throw hn(t,o,r,i)}}function hn(t,e,n,s){const o=`[EDGESPARK_CLIENT] ${t} conflict on "${e}": existing=${Pe(n)}, incoming=${Pe(s)}. Destroy the existing instance before reinitializing.`;return new Error(o)}function pn(t,e){if(t===e)return!0;if(typeof t=="object"&&typeof e=="object")try{return JSON.stringify(t)===JSON.stringify(e)}catch{return!1}return!1}function Pe(t){if(typeof t=="function")return t.name||"[function]";try{return JSON.stringify(t)}catch{return String(t)}}function mn(){if(typeof window>"u")return null;const t=window.__YW_CONFIG__;if(!t)return null;if(typeof t=="string")try{return JSON.parse(t)}catch{return null}return typeof t=="object"?t:null}function z(){const t=mn();return t?.environment==="staging"}function gn(){if(typeof window>"u")return!1;try{return window.self!==window.top}catch{return!0}}function fn(){return z()&&gn()}const Ke="EDGESPARK_TOKEN_SYNC",ye="_es_sync";function Xe(t,e){if(z()&&window.opener)try{const n={type:Ke,token:t,origin:e};window.opener.postMessage(n,"*")}catch{}}function wn(t){if(!z())return()=>{};const e=n=>{const s=n.data;!s||s.type!==Ke||typeof s.token!="string"||typeof s.origin!="string"||t(s.token,s.origin)};return window.addEventListener("message",e),()=>window.removeEventListener("message",e)}function yn(t){if(!z()||typeof window>"u"||!window.opener)return;const e=new URL(window.location.href);if(e.searchParams.get(ye)!=="1")return;e.searchParams.delete(ye),window.history.replaceState({},"",e.toString());const n=t(),s=Object.entries(n);s.length!==0&&s.forEach(([o,i])=>{Xe(i,o)})}function bn(t){if(!z())return t;try{const e=new URL(t);return e.searchParams.set(ye,"1"),e.toString()}catch{return t}}const Je="EDGESPARK_SESSION_TOKEN",vn="default-origin";function En(t){const e=t||{};return{key:e.key||Je,persist:e.persist||"session",hasCustomStorage:!!e.storage}}function Cn(t){const e=t||{},n=e.key||Je,s=e.persist||"session",o=new Set,i=e.serialize||(p=>p),r=e.deserialize||(p=>p),l=kn(),a=Sn(s,e.storage);let c=a?_n(a,n,r,l):{};const d=p=>{o.forEach(y=>{try{y.origin===p&&y.listener()}catch{}})},h=()=>{if(!a)return;const p={byOrigin:{}};if(Object.entries(c).forEach(([y,C])=>{C&&(p.byOrigin[y]=i(C))}),Object.keys(p.byOrigin).length===0){a.removeItem(n);return}a.setItem(n,JSON.stringify(p))},m=(p=l)=>c[p]||null,g=(p,y=l)=>{c[y]!==p&&(c[y]=p,a&&h(),d(y),Xe(p,y))},E=(p=l)=>{delete c[p],h(),d(p)},w=()=>{o.forEach(p=>{try{p.listener()}catch{}})};return wn((p,y)=>{c[y]=p,a&&h(),w()}),yn(()=>({...c})),{getToken:m,setToken:g,clear:E,subscribe(p,y=l){const C={origin:y,listener:p};return o.add(C),()=>o.delete(C)}}}function Ze(t){var e;Ye("TokenStore");const n=dn(),s=En(t);if(n.tokenStore)return un("TokenStore",(e=n.snapshots)==null?void 0:e.tokenStore,s,["key","persist","hasCustomStorage"]),n.tokenStore;const o=Cn(t);return n.tokenStore=o,n.snapshots&&(n.snapshots.tokenStore=s),o}function Sn(t,e){if(e)return e;if(t==="session")return Ne(()=>window.sessionStorage);if(t==="local")return Ne(()=>window.localStorage)}function Ne(t){return{getItem(e){try{return t().getItem(e)}catch{return null}},setItem(e,n){try{t().setItem(e,n)}catch{}},removeItem(e){try{t().removeItem(e)}catch{}}}}function _n(t,e,n,s){try{const o=t.getItem(e);if(!o)return{};try{const r=JSON.parse(o);if(r&&typeof r=="object"&&r.byOrigin&&typeof r.byOrigin=="object"){const l={};return Object.entries(r.byOrigin).forEach(([a,c])=>{try{l[a]=n(c)}catch{l[a]=c}}),l}}catch{}const i=n(o);return i?{[s]:i}:{}}catch{return{}}}function kn(){var t;try{if(typeof window<"u"&&(t=window.location)!=null&&t.origin)return window.location.origin}catch{}return vn}const In="[HTTP-CALL]",xn=512,Ln=new Set(["authorization","cookie","set-cookie","set-auth-token"]);function be(t){const e=new Headers(t||{}),n={},s=[];let o=!1;return e.forEach((i,r)=>{const l=r.toLowerCase();Ln.has(l)?(s.push(l),n[r]=`[redacted len=${i.length}]`,l==="authorization"&&(o=!0)):n[r]=i}),{headers:n,meta:{redactedHeaders:s,hasAuthHeader:o}}}function ve(t,e=xn){if(t==null)return{};const n=t.length;return n<=e?{bodySample:t,bodyLength:n,bodyTruncated:!1}:{bodySample:t.slice(0,e),bodyLength:n,bodyTruncated:!0}}function Qe(t){return t==null?{}:typeof t=="string"?ve(t):t instanceof URLSearchParams?ve(t.toString()):t instanceof FormData?{bodySample:"[omitted FormData]",bodyTruncated:!0}:t instanceof Blob?{bodySample:"[omitted Blob]",bodyLength:t.size,bodyTruncated:!0}:t.arrayBuffer?{bodySample:"[omitted binary]",bodyTruncated:!0}:{bodySample:"[uninspectable body]",bodyTruncated:!0}}async function et(t){try{const e=await t.clone().text();return ve(e)}catch{return{bodySample:"[uninspectable body]",bodyTruncated:!0}}}function Rn(t){if(t)return t.split(`
`).slice(0,5).join(`
`)}function Ee(t){const{requestId:e,start:n,input:s,init:o,res:i,error:r,responseBody:l}=t,a=Date.now()-n,c=typeof s=="string"?s:s.toString(),d=(o.method||"GET").toUpperCase(),h=!!(i!=null&&i.ok)&&!r,m={stage:"request-complete",requestId:e,ts:n,durationMs:a,success:h,request:{method:d,url:c,credentials:o.credentials,headers:be(o.headers),...Qe(o.body)}};if(i&&(m.response={status:i.status,ok:i.ok,headers:be(i.headers),...l||{}}),r){const g=r;m.error={message:g?.message,name:g?.name,stackSample:Rn(g?.stack)}}return m}function se(t,e){if(typeof console>"u")return;const n=`${In} [${t.toUpperCase()}]`;switch(t){case"error":console.error(n,e);break;case"warn":console.warn(n,e);break;case"info":console.info(n,e);break;default:console.debug(n,e)}}const Z={debug:t=>se("debug",t),info:t=>se("info",t),warn:t=>se("warn",t),error:t=>se("error",t),redactHeaders:be,sampleRequestBody:Qe,sampleResponseBody:et,buildCompleteEvent:Ee},ce="__EDGESPARK_AUTH__",re="/api/_es/auth",tt="data-edgespark-auth",u={root:"edgespark-auth",section:"edgespark-auth__section",fields:"edgespark-auth__fields",field:"edgespark-auth__field",label:"edgespark-auth__label",input:"edgespark-auth__input",btn:"edgespark-auth__btn",btnPrimary:"edgespark-auth__btn edgespark-auth__btn--primary",btnOAuth:"edgespark-auth__btn edgespark-auth__btn--oauth",btnOAuthProvider:t=>`edgespark-auth__btn edgespark-auth__btn--oauth edgespark-auth__btn--${t}`,link:"edgespark-auth__link",error:"edgespark-auth__error",warning:"edgespark-auth__warning",info:"edgespark-auth__info",divider:"edgespark-auth__divider",providers:"edgespark-auth__providers",icon:"edgespark-auth__icon",iconProvider:t=>`edgespark-auth__icon edgespark-auth__icon--${t}`,header:"edgespark-auth__header",headerTitle:"edgespark-auth__header-title",headerSubtitle:"edgespark-auth__header-subtitle",logo:"edgespark-auth__logo",highlight:"edgespark-auth__highlight",codeInput:"edgespark-auth__code-input",codeInputDigit:"edgespark-auth__code-input-digit",spinner:"edgespark-auth__spinner",footer:"edgespark-auth__footer",footerText:"edgespark-auth__footer-text",backButton:"edgespark-auth__back-button",guestLink:"edgespark-auth__guest-link",emailIcon:"edgespark-auth__email-icon",iframeModalOverlay:"edgespark-auth__iframe-modal-overlay",iframeModalClose:"edgespark-auth__iframe-modal-close",iframeModalCard:"edgespark-auth__iframe-modal-card",iframeModalHeader:"edgespark-auth__iframe-modal-header",iframeModalIcon:"edgespark-auth__iframe-modal-icon",iframeModalTitle:"edgespark-auth__iframe-modal-title",iframeModalContent:"edgespark-auth__iframe-modal-content",iframeModalBlur:"edgespark-auth__iframe-modal-blur",iframeModalMessage:"edgespark-auth__iframe-modal-message",iframeModalAction:"edgespark-auth__iframe-modal-action",iframeModalActionIcon:"edgespark-auth__iframe-modal-action-icon",skeleton:"edgespark-auth__skeleton",skeletonItem:"edgespark-auth__skeleton-item",skeletonTitle:"edgespark-auth__skeleton-title",skeletonSubtitle:"edgespark-auth__skeleton-subtitle",skeletonInput:"edgespark-auth__skeleton-input",skeletonButton:"edgespark-auth__skeleton-button"};function Tn(t,e){try{const n=new URL(t).search;if(!n||n==="?")return null;const s=n.slice(1).split("&");for(const o of s){if(!o)continue;const[i,...r]=o.split("=");if(i===e)return r.join("=")??null}return null}catch{return null}}function Pn(t,e){if(typeof window>"u")return null;try{return typeof t=="string"?new URL(t,e||window.location.origin).origin:t instanceof URL?t.origin:t instanceof Request?new URL(t.url,e||window.location.origin).origin:null}catch{return null}}const Nn="set-auth-token";function An(){return`${Date.now()}-${Math.random().toString(16).slice(2)}`}function Ae(t){return(typeof t=="string"?t:t.toString()).includes(re)}function On(t){return(typeof t=="string"?t:t.toString()).includes(`${re}/sign-out`)}function nt(t={}){const e=Nn,n=t.tokenStore,s=t.defaultCredentials||"include",o=t.baseOrigin;return async(i,r={})=>{const l=new Headers(r.headers||{}),a=Pn(i,o);if(n){const g=a?n.getToken(a):null;g&&l.set("authorization",`Bearer ${g}`)}const c={...r,credentials:r.credentials||s,headers:l},d=z(),h=d?An():"",m=Date.now();try{const g=await fetch(i,c);if(d){const E=await et(g),w=Ee({requestId:h,start:m,input:i,init:c,res:g,responseBody:E});g.ok||Ae(i)&&g.status<500?Z.info(w):Z.warn(w)}if(n&&a){const E=g.headers.get(e);E&&n.setToken(E,a),g.ok&&On(i)&&n.clear(a)}return g}catch(g){if(d){const E=Ee({requestId:h,start:m,input:i,init:c,error:g}),w=g?.code||g?.name;Ae(i)&&w?Z.info(E):Z.warn(E)}throw g}}}const Mn=/^https?:\/\//i;function Un(t,e){return typeof t!="string"||Mn.test(t)?t:t.startsWith("/")?`${e.replace(/\/$/,"")}${t}`:`${e.replace(/\/$/,"")}/${t}`}function Dn(t){Ye("createHttpClient");const{baseUrl:e,fetchCredentials:n}=t,s=new URL(e).origin,o=Ze({persist:"local"}),i=nt({tokenStore:o,defaultCredentials:n,baseOrigin:s});return async(r,l={})=>{const a=Un(r,e);return i(a,l)}}class Bn extends Error{constructor(e,n,s){super(n),this.name="AuthError",this.code=e,this.meta=s}}const q=(t,e,n)=>new Bn(t,e,n),$n={config:"/config"};function st(t){return typeof t=="string"?t:""}function Vn(t){const e=st(t);return e?e+re:""}function jn(t,e){return Vn(e)+t}function qn(t){if(!t||typeof t!="object")throw q("CONFIG_INVALID","Config must be an object");if(typeof t.disableSignUp!="boolean"||typeof t.enableAnonymous!="boolean")throw q("CONFIG_INVALID","Config missing global flags");if(!t.providerEmailPassword||typeof t.providerEmailPassword.enabled!="boolean")throw q("CONFIG_INVALID","Email/password provider missing");if(!t.providerGoogle||typeof t.providerGoogle.enabled!="boolean")throw q("CONFIG_INVALID","Google provider missing")}async function Gn(t){var e,n;const s=st(t);if(!s)throw q("BASE_URL_UNAVAILABLE","baseUrl must be provided before fetching config");const o=globalThis,i=(e=o[ce])==null?void 0:e.config;if(i&&Ce(i))return i;const r=jn($n.config,s);let l;try{l=await fetch(r,{method:"GET"})}catch(h){throw q("CONFIG_NOT_FOUND","Failed to fetch auth config",{cause:h})}if(!l.ok)throw new Error(`HTTP ${l.status} while fetching ${r}`);const a=await l.json(),c=Fn(a);qn(c);const d={config:c,version:(n=o[ce])==null?void 0:n.version,lastFetchedAt:new Date().toISOString()};return o[ce]=d,c}function Ce(t){if(!t||typeof t!="object"||typeof t.disableSignUp!="boolean"||typeof t.enableAnonymous!="boolean")return!1;const e=t.providerEmailPassword,n=t.providerGoogle;return!(!e||typeof e!="object"||typeof e.enabled!="boolean"||!n||typeof n!="object"||typeof n.enabled!="boolean")}function Fn(t){if(Ce(t))return t;if(t&&typeof t=="object"&&Ce(t.data))return t.data;throw q("CONFIG_INVALID","Invalid auth config structure")}function Hn(t){const e=[];return t.providerGoogle&&e.push(Wn(t.providerGoogle)),{emailPassword:t.providerEmailPassword,oauthProviders:e,disableSignUp:t.disableSignUp,enableAnonymous:t.enableAnonymous}}function de(t){var e;return!!((e=t.emailPassword)!=null&&e.enabled)}function Oe(t){return t.oauthProviders.filter(e=>e.enabled)}function Wn(t){return{id:"google",enabled:!!(t!=null&&t.enabled),config:t}}function ue(t){return!t||typeof t!="string"?!1:/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t.trim())}function Me(t,e=6){return!t||typeof t!="string"?!1:t.length===e&&/^\d+$/.test(t)}function he(t,e){return t===e}function pe(t){const{level:e,context:n,message:s,reason:o,suggestion:i,rawCallbackUrl:r,fallbackUrl:l,fallbackApplied:a,success:c}=t,d={stage:"callback-url",ts:Date.now(),success:typeof c=="boolean"?c:e==="info",context:n,message:s,reason:o,suggestion:i,rawCallbackUrl:r,fallbackUrl:l,fallbackApplied:a};Z[e](d)}function zn(t){try{const e=new URL(t);return e.protocol==="http:"||e.protocol==="https:"}catch{return!1}}function B(t,e){if(typeof window>"u"||typeof window.location>"u"){pe({level:"warn",context:e,message:"callbackUrl resolution failed; no browser location available",reason:"window is undefined",suggestion:"Call from a browser runtime or pass an absolute URL with protocol",rawCallbackUrl:t,fallbackApplied:!1,success:!1});return}const n=window.location.href,s=t?.trim();return s?zn(s)?new URL(s).toString():(pe({level:"warn",context:e,message:"callbackUrl invalid; using current location as fallback",reason:"URL must include http/https protocol",suggestion:"Use a full URL starting with https:// or http://",rawCallbackUrl:t,fallbackUrl:n,fallbackApplied:!0,success:!0}),n):(pe({level:"info",context:e,message:"callbackUrl not provided; using current location",reason:"Missing callbackUrl",suggestion:"Provide a full URL including protocol (e.g. https://example.com)",rawCallbackUrl:t,fallbackUrl:n,fallbackApplied:!0,success:!0}),n)}const Yn="https://public.youware.com/youbase/auth";function ot(t){const e=encodeURIComponent(t||"");return`${Yn}/${e}.png`}const Kn="Sign in with {provider}",Xn="{provider} sign-up needs to be completed in a new tab due to preview page limitations.",Jn="Preview in New Tab",Ue="edgespark-auth-iframe-modal-styles";class Zn{constructor(e){this.overlay=null,this.options=e,this.injectStyles()}mount(e=document.body){this.overlay&&this.destroy();const{providerId:n,providerName:s,onClose:o}=this.options,i=this.options.titleTemplate||Kn,r=this.options.messageTemplate||Xn,l=this.options.actionButtonText||Jn,a=i.replace(/{provider}/g,s),c=r.replace(/{provider}/g,s),d=document.createElement("div");d.className=u.iframeModalOverlay;const h=document.createElement("button");h.className=u.iframeModalClose,h.type="button",h.innerHTML=this.getCloseIconSvg(),h.addEventListener("click",()=>{o()}),d.appendChild(h);const m=document.createElement("div");m.className=u.iframeModalCard;const g=document.createElement("div");g.className=u.iframeModalHeader;const E=document.createElement("span");E.className=u.iframeModalIcon,E.style.backgroundImage=`url(${ot(n)})`,g.appendChild(E);const w=document.createElement("span");w.className=u.iframeModalTitle,w.textContent=a,g.appendChild(w),m.appendChild(g);const p=document.createElement("div");p.className=u.iframeModalContent;const y=this.createBackgroundLayer();p.appendChild(y);const C=document.createElement("div");C.className=u.iframeModalBlur;const b=document.createElement("p");b.className=u.iframeModalMessage,b.textContent=c,C.appendChild(b);const f=document.createElement("button");f.className=u.iframeModalAction,f.type="button";const _=document.createElement("span");_.className=u.iframeModalActionIcon,_.innerHTML=this.getArrowIconSvg(),f.appendChild(_);const v=document.createTextNode(l);f.appendChild(v),f.addEventListener("click",()=>{const R=bn(window.location.href);window.open(R,"_blank")}),C.appendChild(f),p.appendChild(C),m.appendChild(p),d.appendChild(m),e.appendChild(d),this.overlay=d,document.body.style.overflow="hidden"}destroy(){this.overlay&&this.overlay.parentElement&&this.overlay.parentElement.removeChild(this.overlay),this.overlay=null,document.body.style.overflow=""}injectStyles(){if(document.getElementById(Ue))return;const e=document.createElement("style");e.id=Ue,e.textContent=`
      /* Iframe OAuth Modal 样式 */
      .${u.iframeModalOverlay} {
        position: fixed;
        inset: 0;
        background: #f6f5f8;
        z-index: 9999;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .${u.iframeModalClose} {
        position: absolute;
        top: 24px;
        right: 24px;
        width: 32px;
        height: 32px;
        border: none;
        background: transparent;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 50%;
        transition: background-color 0.2s;
      }

      .${u.iframeModalClose}:hover {
        background: rgba(0, 0, 0, 0.06);
      }

      .${u.iframeModalClose} svg {
        width: 20px;
        height: 20px;
        color: rgba(0, 0, 0, 0.6);
      }

      .${u.iframeModalCard} {
        width: 878px;
        max-width: 90vw;
        background: white;
        border-radius: 30px;
        overflow: hidden;
        box-shadow: 0 4px 24px rgba(0, 0, 0, 0.08);
      }

      .${u.iframeModalHeader} {
        display: flex;
        align-items: center;
        gap: 10px;
        padding: 16px 20px;
        height: 64px;
        box-sizing: border-box;
        border-bottom: 1px solid rgba(0, 0, 0, 0.06);
      }

      .${u.iframeModalIcon} {
        width: 24px;
        height: 24px;
        background-size: contain;
        background-repeat: no-repeat;
        background-position: center;
        flex-shrink: 0;
      }

      .${u.iframeModalTitle} {
        font-size: 14px;
        font-weight: 580;
        color: rgba(0, 0, 0, 0.95);
        line-height: 1.4;
        letter-spacing: -0.21px;
      }

      .${u.iframeModalContent} {
        position: relative;
        min-height: 335px;
      }

      .${u.iframeModalBlur} {
        position: absolute;
        inset: 0;
        background: rgba(255, 255, 255, 0.8);
        backdrop-filter: blur(5px);
        -webkit-backdrop-filter: blur(5px);
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        gap: 32px;
        padding: 88px;
        box-sizing: border-box;
      }

      .${u.iframeModalMessage} {
        font-size: 16px;
        font-weight: 580;
        color: rgba(0, 0, 0, 0.95);
        text-align: center;
        max-width: 390px;
        line-height: 1.4;
        letter-spacing: -0.16px;
        margin: 0;
      }

      .${u.iframeModalAction} {
        display: inline-flex;
        align-items: center;
        gap: 4px;
        padding: 0 16px 0 12px;
        height: 36px;
        background: #2c2c2c;
        color: rgba(255, 255, 255, 0.9);
        border: none;
        border-radius: 9999px;
        font-size: 14px;
        font-weight: 580;
        cursor: pointer;
        transition: background-color 0.2s;
        line-height: 1.4;
        letter-spacing: -0.21px;
      }

      .${u.iframeModalAction}:hover {
        background: #1a1a1a;
      }

      .${u.iframeModalActionIcon} {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 10.667px;
        height: 10.667px;
      }

      .${u.iframeModalActionIcon} svg {
        width: 100%;
        height: 100%;
      }

      /* 背景装饰层（毛玻璃之下） */
      .edgespark-auth__iframe-modal-bg {
        position: absolute;
        top: 40px;
        left: 0;
        right: 0;
        bottom: 0;
        display: flex;
        gap: 48px;
        padding: 0 28px;
        z-index: 1;
      }

      .edgespark-auth__iframe-modal-bg-header {
        flex: 1;
        display: flex;
        flex-direction: column;
        gap: 4px;
      }

      .edgespark-auth__iframe-modal-bg-title {
        font-size: 34px;
        font-weight: 600;
        color: rgba(0, 0, 0, 0.95);
        line-height: 1.2;
      }

      .edgespark-auth__iframe-modal-bg-subtitle {
        font-size: 14px;
        font-weight: 420;
        color: rgba(0, 0, 0, 0.4);
        line-height: 1.3;
        letter-spacing: 0.042px;
      }

      .edgespark-auth__iframe-modal-bg-form {
        flex: 1;
        display: flex;
        flex-direction: column;
        gap: 16px;
      }

      .edgespark-auth__iframe-modal-bg-input {
        height: 64px;
        border: 1px solid rgba(0, 0, 0, 0.95);
        border-radius: 12px;
        box-sizing: border-box;
      }

      .edgespark-auth__iframe-modal-bg-input-small {
        width: 127px;
        height: 20px;
        background: rgba(0, 0, 0, 0.95);
        border-radius: 12px;
        opacity: 0.2;
      }

      .edgespark-auth__iframe-modal-bg-input-medium {
        height: 32px;
        background: rgba(0, 0, 0, 0.95);
        border-radius: 12px;
        opacity: 0.2;
      }

      .edgespark-auth__iframe-modal-bg-button {
        position: absolute;
        bottom: 30px;
        right: 28px;
        width: 100px;
        height: 48px;
        background: #0d0d0d;
        border-radius: 9999px;
        opacity: 0.15;
      }

      /* 确保毛玻璃层在背景装饰层之上 */
      .${u.iframeModalBlur} {
        z-index: 2;
      }

      /* ========== 移动端适配 ========== */
      @media (max-width: 768px) {
        .${u.iframeModalCard} {
          width: 100%;
          max-width: 100%;
          height: 100%;
          border-radius: 0;
        }

        .${u.iframeModalClose} {
          top: 16px;
          right: 16px;
        }

        .${u.iframeModalContent} {
          min-height: calc(100vh - 64px);
        }

        .${u.iframeModalBlur} {
          padding: 40px 24px;
        }

        .${u.iframeModalMessage} {
          font-size: 14px;
          max-width: 100%;
        }

        /* 背景装饰层移动端适配 */
        .edgespark-auth__iframe-modal-bg {
          flex-direction: column;
          gap: 24px;
          padding: 0 20px;
          top: 24px;
        }

        .edgespark-auth__iframe-modal-bg-header {
          flex: none;
        }

        .edgespark-auth__iframe-modal-bg-title {
          font-size: 24px;
        }

        .edgespark-auth__iframe-modal-bg-subtitle {
          font-size: 12px;
        }

        .edgespark-auth__iframe-modal-bg-form {
          flex: none;
        }

        .edgespark-auth__iframe-modal-bg-input {
          height: 48px;
        }

        .edgespark-auth__iframe-modal-bg-input-small {
          width: 80px;
          height: 16px;
        }

        .edgespark-auth__iframe-modal-bg-input-medium {
          height: 24px;
        }

        .edgespark-auth__iframe-modal-bg-button {
          bottom: 20px;
          right: 20px;
          width: 80px;
          height: 40px;
        }
      }
    `,document.head.appendChild(e)}createBackgroundLayer(){const e=document.createElement("div");e.className="edgespark-auth__iframe-modal-bg";const n=document.createElement("div");n.className="edgespark-auth__iframe-modal-bg-header";const s=document.createElement("div");s.className="edgespark-auth__iframe-modal-bg-title",s.textContent="Sign in",n.appendChild(s);const o=document.createElement("div");o.className="edgespark-auth__iframe-modal-bg-subtitle",o.textContent="Sign up to Continue",n.appendChild(o),e.appendChild(n);const i=document.createElement("div");i.className="edgespark-auth__iframe-modal-bg-form";const r=document.createElement("div");r.className="edgespark-auth__iframe-modal-bg-input",i.appendChild(r);const l=document.createElement("div");l.className="edgespark-auth__iframe-modal-bg-input-small",i.appendChild(l);const a=document.createElement("div");a.className="edgespark-auth__iframe-modal-bg-input-medium",i.appendChild(a),e.appendChild(i);const c=document.createElement("div");return c.className="edgespark-auth__iframe-modal-bg-button",e.appendChild(c),e}getCloseIconSvg(){return`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <line x1="18" y1="6" x2="6" y2="18"></line>
      <line x1="6" y1="6" x2="18" y2="18"></line>
    </svg>`}getArrowIconSvg(){return`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
      <line x1="7" y1="17" x2="17" y2="7"></line>
      <polyline points="7 7 17 7 17 17"></polyline>
    </svg>`}}class Qn{constructor(e){this.options=e,this.listeners=new Set,this.countdownInterval=null,this.iframeModal=null,this.tokenUnsubscribe=null,this.state={flow:"sign-in",mode:"email-password",error:null,data:{},loading:!1}}getState(){return{...this.state}}subscribe(e){return this.listeners.add(e),()=>this.listeners.delete(e)}setState(e){this.state={...this.state,...e},this.notifyListeners()}notifyListeners(){this.listeners.forEach(e=>{try{e(this.getState())}catch(n){console.error("Listener error:",n)}})}transitionTo(e,n){this.countdownInterval&&(clearInterval(this.countdownInterval),this.countdownInterval=null);let s;(e==="verify-code"||e==="verify-email"||e==="set-new-password")&&(s=60);const o={...n||{}};o.email===void 0&&this.state.data.email&&(o.email=this.state.data.email),o.name===void 0&&this.state.data.name&&(o.name=this.state.data.name),this.setState({flow:e,error:null,errorMessage:void 0,oauthLoadingProvider:void 0,data:o,resendCountdown:s}),(e==="verify-code"||e==="verify-email"||e==="set-new-password")&&setTimeout(()=>{this.state.resendCountdown||(this.state.resendCountdown=60),this.startCountdownTimer()},0)}updateData(e){this.state={...this.state,data:{...this.state.data,...e}}}setError(e,n){this.setState({error:e,errorMessage:n||this.getErrorMessage(e),loading:!1})}clearError(){this.setState({error:null,errorMessage:void 0})}getErrorMessage(e){if(!e)return"";const{errors:n}=this.options.labels;switch(e){case"INVALID_EMAIL":case"INVALID_CODE":case"CODE_EXPIRED":case"PASSWORD_MISMATCH":case"ACCOUNT_EXISTS":case"ACCOUNT_NOT_FOUND":case"WRONG_PASSWORD":case"EMAIL_NOT_VERIFIED":case"EMAIL_MISMATCH":case"GENERIC_ERROR":return n?.[e]||this.options.labels.common.unknownError;default:return this.options.labels.common.unknownError}}async handleSignIn(){var e,n,s,o,i;const{email:r,password:l}=this.state.data;if(!r||!ue(r)){this.setError("INVALID_EMAIL");return}if(!l){this.setError("GENERIC_ERROR",this.options.labels.errors.required);return}this.setState({loading:!0,error:null,anonymousLoading:!1});try{const a=(n=(e=this.options.config.emailPassword)==null?void 0:e.config)==null?void 0:n.requireEmailVerification,c=B(this.resolveEmailCallback(a),a?"emailVerification":"emailPassword"),d={email:r,password:l};c&&(d.callbackURL=c);const h=await this.options.authClient.signIn.email(d);if(h.error){await this.handleBetterAuthError(h.error,{email:r});return}if(this.setState({loading:!1}),(i=(o=this.options).onLogin)==null||i.call(o,(s=h.data)==null?void 0:s.user),c&&this.redirectTo(c))return;this.transitionTo("success")}catch(a){await this.handleBetterAuthError(a,{email:r})}}async handleSignUp(){var e,n,s;const{email:o,password:i,confirmPassword:r}=this.state.data;if(!o||!ue(o)){this.setError("INVALID_EMAIL");return}if(!r||!he(i||"",r)){this.setError("PASSWORD_MISMATCH");return}this.setState({loading:!0,error:null,anonymousLoading:!1});try{const l=(e=this.options.redirects)==null?void 0:e.emailVerification,a=B(l,"emailVerification"),c={name:o.split("@")[0]||"User",email:o,password:i};a&&(c.callbackURL=a);const d=await this.options.authClient.signUp.email(c);if(d.error){await this.handleBetterAuthError(d.error,{email:o});return}this.setState({loading:!1}),(s=(n=this.options.config.emailPassword)==null?void 0:n.config)!=null&&s.requireEmailVerification?this.transitionTo("verify-email",{email:o}):this.transitionTo("sign-in")}catch(l){await this.handleBetterAuthError(l,{email:o})}}async handleOAuthSignIn(e){var n,s,o,i,r,l;if(fn()){this.showIframeOAuthModal(e);return}this.setState({oauthLoadingProvider:e,error:null});try{const a=await this.options.authClient.signIn.social({provider:e,callbackURL:B((s=(n=this.options.redirects)==null?void 0:n.oauth)==null?void 0:s.success,"oauth.success"),newUserCallbackURL:B((i=(o=this.options.redirects)==null?void 0:o.oauth)==null?void 0:i.newUser,"oauth.newUser"),errorCallbackURL:B((l=(r=this.options.redirects)==null?void 0:r.oauth)==null?void 0:l.error,"oauth.error")});if(a.error){await this.handleBetterAuthError(a.error),this.setState({oauthLoadingProvider:void 0});return}}catch(a){await this.handleBetterAuthError(a),this.setState({oauthLoadingProvider:void 0})}}showIframeOAuthModal(e){this.destroyIframeModal(),this.setState({oauthLoadingProvider:e,error:null});const n=e.charAt(0).toUpperCase()+e.slice(1),s=this.options.labels.iframeModal;this.iframeModal=new Zn({providerId:e,providerName:n,titleTemplate:s?.titleTemplate,messageTemplate:s?.messageTemplate,actionButtonText:s?.actionButton,onClose:()=>{this.destroyIframeModal(),this.setState({oauthLoadingProvider:void 0})}}),this.iframeModal.mount(),this.options.onAuthStateChange&&(this.tokenUnsubscribe=this.options.onAuthStateChange(async()=>{var o,i,r;this.destroyIframeModal(),this.setState({oauthLoadingProvider:void 0});try{const l=await this.options.authClient.getSession();(o=l?.data)!=null&&o.user&&this.options.onLogin&&this.options.onLogin(l.data.user);const a=B((r=(i=this.options.redirects)==null?void 0:i.oauth)==null?void 0:r.success,"oauth.success");if(a&&this.redirectTo(a))return}catch{}}))}destroyIframeModal(){this.tokenUnsubscribe&&(this.tokenUnsubscribe(),this.tokenUnsubscribe=null),this.iframeModal&&(this.iframeModal.destroy(),this.iframeModal=null)}async handleResendPasswordResetCode(){const{email:e}=this.state.data;if(!e){this.setError("GENERIC_ERROR",this.options.labels.errors.required);return}try{const n=await this.options.authClient.forgetPassword.emailOtp({email:e});if(n.error){await this.handleBetterAuthError(n.error);return}this.startResendCountdown(60)}catch(n){await this.handleBetterAuthError(n)}}async handleAnonymousSignIn(){var e,n,s,o;if(!this.options.config.enableAnonymous){this.setError("GENERIC_ERROR",this.options.labels.common.unknownError);return}this.setState({anonymousLoading:!0,error:null,loading:this.state.loading});try{const i=B((e=this.options.redirects)==null?void 0:e.anonymous,"anonymous"),r=await this.options.authClient.signIn.anonymous(i?{callbackURL:i}:{});if(r!=null&&r.error){await this.handleBetterAuthError(r.error),this.setState({anonymousLoading:!1});return}if(this.setState({anonymousLoading:!1}),(o=(s=this.options).onLogin)==null||o.call(s,(n=r?.data)==null?void 0:n.user),i&&this.redirectTo(i))return;this.transitionTo("success")}catch(i){this.setState({anonymousLoading:!1}),await this.handleBetterAuthError(i)}}async handleResendVerificationEmail(){var e,n,s,o,i;const{email:r}=this.state.data;if(!r){this.setError("GENERIC_ERROR",this.options.labels.errors.required);return}this.setState({loading:!0,error:null,anonymousLoading:!1});try{const l=await this.options.authClient.sendVerificationEmail({email:r,callbackURL:B((e=this.options.redirects)==null?void 0:e.emailVerification,"emailVerification")});if(l!=null&&l.error){this.setError("GENERIC_ERROR",l.error.message),(s=(n=this.options).onError)==null||s.call(n,l.error);return}this.setState({loading:!1}),this.startResendCountdown(60)}catch(l){this.setError("GENERIC_ERROR",l?.message),(i=(o=this.options).onError)==null||i.call(o,l)}}async handleVerifyCode(){var e,n,s,o,i;const{email:r,code:l}=this.state.data;if(!l||!Me(l)){this.setError("INVALID_CODE",this.options.labels.verifyCode.invalidCode);return}this.setState({loading:!0,error:null,anonymousLoading:!1});try{await new Promise(c=>setTimeout(c,1e3)),this.setState({loading:!1});const a=await this.options.authClient.getSession();(s=(n=this.options).onLogin)==null||s.call(n,(e=a?.data)==null?void 0:e.user),this.transitionTo("success")}catch(a){this.setError("GENERIC_ERROR",a?.message),(i=(o=this.options).onError)==null||i.call(o,a)}}async handleSendPasswordReset(){var e,n,s,o;const{email:i}=this.state.data;if(!i||!ue(i)){this.setError("INVALID_EMAIL");return}this.setState({loading:!0,error:null,anonymousLoading:!1});try{const r=await this.options.authClient.forgetPassword.emailOtp({email:i});if(r.error){this.setError("GENERIC_ERROR",r.error.message),(n=(e=this.options).onError)==null||n.call(e,r.error),this.setState({loading:!1});return}this.setState({loading:!1}),this.transitionTo("set-new-password",{email:i})}catch(r){this.setError("GENERIC_ERROR",r?.message),(o=(s=this.options).onError)==null||o.call(s,r),this.setState({loading:!1})}}async handleSetNewPassword(){var e,n,s,o;const{email:i,code:r,password:l,confirmPassword:a}=this.state.data;if(!r||!Me(r)){this.setError("INVALID_CODE",this.options.labels.verifyCode.invalidCode);return}if(!he(l||"",a||"")){this.setError("PASSWORD_MISMATCH");return}this.setState({loading:!0,error:null,anonymousLoading:!1});try{const c=await this.options.authClient.emailOtp.resetPassword({email:i,otp:r,password:l});if(c.error){const d=c.error.code||c.error.name;d==="INVALID_OTP"?this.setError("INVALID_CODE",this.options.labels.verifyCode.invalidCode):d==="OTP_EXPIRED"?this.setError("CODE_EXPIRED",this.options.labels.verifyCode.codeExpired):d==="TOO_MANY_ATTEMPTS"?this.setError("GENERIC_ERROR",this.getErrorMessageByCode(d,c.error.message)):this.setError("GENERIC_ERROR",c.error.message),(n=(e=this.options).onError)==null||n.call(e,c.error),this.setState({loading:!1});return}this.setState({loading:!1}),this.transitionTo("success",{successType:"password-reset"})}catch(c){this.setError("GENERIC_ERROR",c?.message),(o=(s=this.options).onError)==null||o.call(s,c),this.setState({loading:!1})}}async handleChangePassword(e=!1){var n,s,o,i,r,l,a;const{currentPassword:c,newPassword:d,confirmPassword:h}=this.state.data;if(!c){this.setError("GENERIC_ERROR",this.options.labels.errors.required);return}if(!he(d||"",h||"")){this.setError("PASSWORD_MISMATCH");return}this.setState({loading:!0,error:null,anonymousLoading:!1});try{const m=await this.options.authClient.changePassword({currentPassword:c,newPassword:d,revokeOtherSessions:e});if(m!=null&&m.error){this.setError("GENERIC_ERROR",m.error.message),(s=(n=this.options).onError)==null||s.call(n,m.error);return}this.setState({loading:!1});const g=await this.options.authClient.getSession();(r=(i=this.options).onLogin)==null||r.call(i,(o=g?.data)==null?void 0:o.user),this.transitionTo("success",{successType:"password-changed"})}catch(m){this.setError("GENERIC_ERROR",m?.message),(a=(l=this.options).onError)==null||a.call(l,m)}}resolveEmailCallback(e){var n,s;return e?(n=this.options.redirects)==null?void 0:n.emailVerification:(s=this.options.redirects)==null?void 0:s.emailPassword}redirectTo(e){return!e||typeof window>"u"?!1:(window.location.assign(e),!0)}startResendCountdown(e=60){this.countdownInterval&&(clearInterval(this.countdownInterval),this.countdownInterval=null),this.state={...this.state,resendCountdown:e},this.notifyCountdownUpdate(),this.startCountdownTimer()}startCountdownTimer(){this.countdownInterval&&(clearInterval(this.countdownInterval),this.countdownInterval=null),!(typeof window>"u")&&(this.countdownInterval=window.setInterval(()=>{const e=this.state.resendCountdown||0;e<=1?(this.countdownInterval&&(clearInterval(this.countdownInterval),this.countdownInterval=null),this.state={...this.state,resendCountdown:void 0},this.notifyCountdownUpdate()):(this.state={...this.state,resendCountdown:e-1},this.notifyCountdownUpdate())},1e3))}notifyCountdownUpdate(){const e=this.getState();this.listeners.forEach(n=>{try{n({...e,resendCountdown:this.state.resendCountdown})}catch(s){console.error("Listener error:",s)}})}async handleBetterAuthError(e,n){var s,o,i,r,l;const a=e&&typeof e=="object"&&e.code||"UNKNOWN",c=e&&typeof e=="object"&&e.message||this.options.labels.common.unknownError;switch(a==="UNKNOWN"&&console.error("[EDGESPARK_AUTH] Missing error code",{code:e?.code,message:c,error:e}),a){case"EMAIL_NOT_VERIFIED":this.setError("GENERIC_ERROR",this.getErrorMessageByCode(a,c)),this.transitionTo("verify-email",{email:n?.email}),this.startResendCountdown(60);try{await this.options.authClient.sendVerificationEmail({email:n?.email,callbackURL:B((s=this.options.redirects)==null?void 0:s.emailVerification,"emailVerification")})}catch(d){(i=(o=this.options).onError)==null||i.call(o,d)}break;case"USER_ALREADY_EXISTS":case"USER_ALREADY_EXISTS_USE_ANOTHER_EMAIL":this.setError("GENERIC_ERROR",this.getErrorMessageByCode(a,c));break;case"USER_NOT_FOUND":case"ACCOUNT_NOT_FOUND":case"CREDENTIAL_ACCOUNT_NOT_FOUND":this.setError("GENERIC_ERROR",this.getErrorMessageByCode(a,c));break;case"INVALID_EMAIL_OR_PASSWORD":case"INVALID_PASSWORD":case"INVALID_TOKEN":this.setError("GENERIC_ERROR",this.getErrorMessageByCode(a,c));break;case"INVALID_EMAIL":this.setError("GENERIC_ERROR",this.getErrorMessageByCode(a,c));break;case"PASSWORD_TOO_SHORT":case"PASSWORD_TOO_LONG":this.setError("GENERIC_ERROR",this.getErrorMessageByCode(a,c));break;default:this.setError("GENERIC_ERROR",this.getErrorMessageByCode(a,c))}(l=(r=this.options).onError)==null||l.call(r,e)}getErrorMessageByCode(e,n){var s,o;return((o=(s=this.options.labels)==null?void 0:s.errors)==null?void 0:o[e])||n||this.options.labels.common.unknownError}}class j{constructor(e){if(this.config=e,this.element=document.createElement("div"),this.element.className=u.header,e.showLogo){const s=this.createLogo();this.element.appendChild(s)}const n=document.createElement("h1");if(n.className=u.headerTitle,n.textContent=e.title,this.element.appendChild(n),e.subtitle){const s=this.createSubtitle();this.element.appendChild(s)}}createLogo(){const e=document.createElement("div");return e.className=u.logo,e}createSubtitle(){const e=document.createElement("div");if(e.className=u.headerSubtitle,this.config.highlightedText){const n=this.config.subtitle.split(this.config.highlightedText);if(n.length>1){e.textContent=n[0];const s=document.createElement("span");s.className=u.highlight,s.textContent=this.config.highlightedText,e.appendChild(s);const o=document.createTextNode(n[1]);e.appendChild(o)}else e.textContent=this.config.subtitle}else e.textContent=this.config.subtitle;return e}update(e){if(e.title){const n=this.element.querySelector(`.${u.headerTitle}`);n&&(n.textContent=e.title)}if(e.subtitle!==void 0){const n=this.element.querySelector(`.${u.headerSubtitle}`);if(n&&n.remove(),e.subtitle){this.config.subtitle=e.subtitle,this.config.highlightedText=e.highlightedText;const s=this.createSubtitle();this.element.appendChild(s)}}}destroy(){}}class A{constructor(e){this.config=e,this.cleanup=[],this.element=document.createElement("div"),this.element.className=u.field;const n=document.createElement("label");n.className=u.label,n.textContent=e.label,this.input=document.createElement("input"),this.input.className=u.input,this.input.type=e.type,this.input.name=e.name,this.input.required=e.required??!1,this.input.disabled=e.disabled??!1,this.input.value=e.value||"";const s=e.placeholder??e.label;s&&(this.input.placeholder=s),e.autocomplete&&(this.input.autocomplete=e.autocomplete),this.errorDiv=document.createElement("div"),this.errorDiv.className=u.error,this.errorDiv.style.display="none",e.error&&(this.errorDiv.textContent=e.error,this.errorDiv.style.display="block"),this.element.appendChild(n),this.element.appendChild(this.input),this.element.appendChild(this.errorDiv),this.bindEvents()}bindEvents(){const e=n=>{n.target};this.input.addEventListener("input",e),this.cleanup.push(()=>this.input.removeEventListener("input",e))}getValue(){return this.input.value.trim()}setValue(e){this.input.value=e}setError(e){this.errorDiv.textContent=e,this.errorDiv.style.display="block",this.input.classList.add("error")}clearError(){this.errorDiv.style.display="none",this.input.classList.remove("error")}setDisabled(e){this.input.disabled=e}focus(){this.input.focus()}destroy(){this.cleanup.forEach(e=>{try{e()}catch{}}),this.cleanup=[]}}class De{constructor(e){this.inputs=[],this.cleanup=[],this.config=e,this.element=document.createElement("div"),this.element.className=u.codeInput;for(let n=0;n<e.length;n++){const s=this.createInput(n);this.inputs.push(s),this.element.appendChild(s)}e.value&&this.setValue(e.value)}createInput(e){const n=document.createElement("input");n.className=u.codeInputDigit,n.type="text",n.maxLength=1,n.pattern="[0-9]",n.inputMode="numeric",n.disabled=this.config.disabled??!1;const s=r=>{const l=r.target,a=l.value;if(a&&!/^\d$/.test(a)){l.value="";return}a&&e<this.inputs.length-1&&this.inputs[e+1].focus(),this.updateValue()},o=r=>{r.key==="Backspace"&&!n.value&&e>0&&this.inputs[e-1].focus()},i=r=>{var l;r.preventDefault();const a=(l=r.clipboardData)==null?void 0:l.getData("text");if(!a)return;const c=a.replace(/\D/g,"").slice(0,this.config.length);this.setValue(c);const d=Math.min(c.length,this.inputs.length-1);this.inputs[d].focus()};return n.addEventListener("input",s),n.addEventListener("keydown",o),n.addEventListener("paste",i),this.cleanup.push(()=>{n.removeEventListener("input",s),n.removeEventListener("keydown",o),n.removeEventListener("paste",i)}),n}updateValue(){const e=this.inputs.map(n=>n.value).join("");this.config.onChange(e),e.length===this.config.length&&this.config.onComplete&&this.config.onComplete(e)}getValue(){return this.inputs.map(e=>e.value).join("")}setValue(e){e.slice(0,this.config.length).split("").forEach((n,s)=>{this.inputs[s]&&(this.inputs[s].value=n)})}setError(e){this.inputs.forEach(n=>{e?n.classList.add("error"):n.classList.remove("error")})}setDisabled(e){this.inputs.forEach(n=>{n.disabled=e})}clear(){this.inputs.forEach(e=>{e.value=""}),this.inputs[0].focus()}focus(){const e=this.inputs.findIndex(n=>!n.value);e>=0?this.inputs[e].focus():this.inputs[0].focus()}destroy(){this.cleanup.forEach(e=>{try{e()}catch{}}),this.cleanup=[]}}class ${constructor(e){if(this.cleanup=[],this.isLoading=!1,this.config=e,this.originalText=e.text,this.element=document.createElement("button"),this.element.type="button",this.element.className=this.getClassName(),this.element.disabled=e.disabled??!1,e.icon){const s=document.createElement("span");s.className=e.icon,this.element.appendChild(s)}const n=document.createElement("span");n.textContent=e.text,this.element.appendChild(n),this.bindEvents(),e.loading&&this.setLoading(!0)}getClassName(){const e=u.btn;switch(this.config.variant){case"primary":return u.btnPrimary;case"oauth":return u.btnOAuth;default:return e}}bindEvents(){const e=async()=>{if(!(this.isLoading||this.element.disabled))try{this.setLoading(!0),await this.config.onClick()}catch(n){console.error("Button onClick error:",n)}finally{this.setLoading(!1)}};this.element.addEventListener("click",e),this.cleanup.push(()=>this.element.removeEventListener("click",e))}setLoading(e){if(this.isLoading=e,e){this.element.disabled=!0,this.element.innerHTML="";const n=document.createElement("span");n.className=u.spinner,this.element.appendChild(n);const s=document.createElement("span");s.textContent=this.config.text,this.element.appendChild(s)}else{if(this.element.disabled=this.config.disabled??!1,this.element.innerHTML="",this.config.icon){const s=document.createElement("span");s.className=this.config.icon,this.element.appendChild(s)}const n=document.createElement("span");n.textContent=this.originalText,this.element.appendChild(n)}}setText(e){this.originalText=e;const n=this.element.querySelector("span:last-child");n&&(n.textContent=e)}setDisabled(e){this.config.disabled=e,this.isLoading||(this.element.disabled=e)}destroy(){this.cleanup.forEach(e=>{try{e()}catch{}}),this.cleanup=[]}}function es(t){return new Promise(e=>{const n=t.animate([{transform:"translateX(0)"},{transform:"translateX(-10px)"},{transform:"translateX(10px)"},{transform:"translateX(-10px)"},{transform:"translateX(10px)"},{transform:"translateX(0)"}],{duration:400,easing:"ease-in-out"});n.onfinish=()=>e()})}class W{constructor(e){this.config=e,this.element=document.createElement("div"),this.element.className=this.getClassName(),this.element.style.display=e.visible?"block":"none",e.message&&(this.element.textContent=e.message)}getClassName(){const e=u.error;return this.config.type==="warning"?`${e} ${u.warning}`:this.config.type==="info"?`${e} ${u.info}`:e}setMessage(e,n=!0){this.config.message=e,this.element.textContent=e,this.show(),n&&es(this.element)}show(){this.config.visible=!0,this.element.style.display="block"}hide(){this.config.visible=!1,this.element.style.display="none"}setType(e){this.config.type=e,this.element.className=this.getClassName()}destroy(){}}class Be{constructor(e="or"){this.text=e,this.element=document.createElement("div"),this.element.className=u.divider,this.element.textContent=e}setText(e){this.text=e,this.element.textContent=e}destroy(){}}class $e{constructor(e,n,s){this.provider=e,this.labels=n,this.onClick=s,this.cleanup=[],this.element=document.createElement("button"),this.element.type="button",this.element.className=u.btnOAuthProvider(e.id);const o=document.createElement("span");o.className=u.iconProvider(e.id),o.style.backgroundImage=`url(${ot(e.id)})`,this.element.appendChild(o);const i=document.createElement("span");i.className="edgespark-auth__btn-text";const r=`${e.id}BtnName`,l=this.labels[r];i.textContent=l||`${this.labels.buttonTextPrefix} ${e.name}`,this.element.appendChild(i),this.bindEvents()}bindEvents(){const e=async()=>{try{this.setLoading(!0),await this.onClick()}catch(n){console.error("OAuth button click error:",n),this.setLoading(!1)}};this.element.addEventListener("click",e),this.cleanup.push(()=>this.element.removeEventListener("click",e))}setLoading(e){this.element.disabled=e;const n=this.element.querySelector(`.${u.icon}`);if(e){if(this.element.classList.add("loading"),n&&(n.style.display="none"),!this.element.querySelector(`.${u.spinner}`)){const s=document.createElement("span");s.className=u.spinner,this.element.insertBefore(s,this.element.firstChild)}}else{this.element.classList.remove("loading"),n&&(n.style.display="");const s=this.element.querySelector(`.${u.spinner}`);s&&s.remove()}}setLoadingState(e){this.setLoading(e)}setDisabled(e){this.element.disabled=e;const n=this.element.querySelector(`.${u.icon}`);if(e){if(this.element.classList.add("loading"),n&&(n.style.display="none"),!this.element.querySelector(`.${u.spinner}`)){const s=document.createElement("span");s.className=u.spinner,this.element.insertBefore(s,this.element.firstChild)}}else{this.element.classList.remove("loading"),n&&(n.style.display="");const s=this.element.querySelector(`.${u.spinner}`);s&&s.remove()}}destroy(){this.cleanup.forEach(e=>{try{e()}catch{}}),this.cleanup=[]}}class Ve{constructor(e){this.options=e,this.components=[]}createView(){this.cleanup();const{state:e}=this.options;switch(e.flow){case"sign-in":return this.buildSignInView();case"sign-up":return this.buildSignUpView();case"verify-email":return this.buildVerifyEmailView();case"verify-code":return this.buildVerifyCodeView();case"reset-password":return this.buildResetPasswordView();case"set-new-password":return this.buildSetNewPasswordView();case"change-password":return this.buildChangePasswordView();case"success":return this.buildSuccessView();default:return this.buildSignInView()}}buildSignInView(){var e,n;const s=document.createElement("div"),{labels:o,state:i,config:r}=this.options,l=o.signIn.emailPlaceholder||o.signIn.emailLabel,a=o.signIn.passwordPlaceholder||o.signIn.passwordLabel,c=new j({title:o.signIn.title,subtitle:o.signIn.subtitle});i.error&&c.element.classList.add("has-error-below"),this.components.push(c),s.appendChild(c.element);const d=document.createElement("div");d.className=u.section,i.error&&d.classList.add("has-error");const h=new W({message:i.errorMessage||"",visible:!!i.error});this.components.push(h),d.appendChild(h.element);const m=document.createElement("div");m.className=u.fields;const g=new A({type:"email",name:"email",label:o.signIn.emailLabel,placeholder:l,value:i.data.email||"",autocomplete:"email",required:!0,disabled:!!i.oauthLoadingProvider});this.components.push(g),m.appendChild(g.element);const E=new A({type:"password",name:"password",label:o.signIn.passwordLabel,placeholder:a,value:i.data.password||"",autocomplete:"current-password",required:!0,disabled:!!i.oauthLoadingProvider});this.components.push(E),m.appendChild(E.element),d.appendChild(m);const w=o.signIn.emailOnlyButton||o.signIn.loginButton,p=new $({text:w,onClick:async()=>{this.options.onStateChange({data:{...i.data,email:g.getValue(),password:E.getValue()}}),await this.options.onAction("signIn")},variant:"primary",fullWidth:!0,loading:i.loading,disabled:!!i.oauthLoadingProvider||!!i.anonymousLoading});this.components.push(p),d.appendChild(p.element);const y=Oe(r);if(de(r)&&y.length>0){const b=new Be(o.common.orText);this.components.push(b),d.appendChild(b.element)}if(y.length>0){const b=document.createElement("div");b.className=u.providers,y.forEach(f=>{const _=!!i.loading||!!i.anonymousLoading,v=new $e({id:f.id,name:f.id,enabled:f.enabled&&!_},o.oauth,async()=>{await this.options.onAction("oauthSignIn",{provider:f.id})});i.oauthLoadingProvider===f.id&&v.setLoadingState(!0),_&&i.oauthLoadingProvider!==f.id&&v.element.setAttribute("disabled","true"),this.components.push(v),b.appendChild(v.element)}),d.appendChild(b)}const C=document.createElement("div");if(C.className=u.footer,!r.disableSignUp&&de(r)){const b=document.createElement("span");b.className=u.footerText,o.signIn.signUpPrompt&&b.append(document.createTextNode(`${o.signIn.signUpPrompt} `));const f=document.createElement("a");f.className=u.link,f.textContent=o.signIn.toggleToSignUp,f.href="#",f.addEventListener("click",_=>{_.preventDefault(),this.options.onAction("switchToSignUp")}),b.appendChild(f),C.appendChild(b)}if((n=(e=r.emailPassword)==null?void 0:e.config)!=null&&n.requirePasswordResetEmailVerification){const b=document.createElement("a");b.className=u.link,b.textContent=o.signIn.forgotPassword,b.href="#",b.addEventListener("click",f=>{f.preventDefault(),this.options.onAction("switchToResetPassword")}),C.appendChild(b)}return d.appendChild(C),s.appendChild(d),s}buildSignUpView(){const e=document.createElement("div"),{labels:n,state:s,config:o}=this.options,i=new j({title:n.signUp.title,subtitle:n.signUp.subtitle});s.error&&i.element.classList.add("has-error-below"),this.components.push(i),e.appendChild(i.element);const r=document.createElement("div");r.className=u.section,s.error&&r.classList.add("has-error");const l=new W({message:s.errorMessage||"",visible:!!s.error});this.components.push(l),r.appendChild(l.element);const a=document.createElement("div");a.className=u.fields;const c=n.signUp.emailPlaceholder||n.signUp.emailLabel,d=new A({type:"email",name:"email",label:n.signUp.emailLabel,placeholder:c,value:s.data.email||"",autocomplete:"email",required:!0,disabled:!!s.oauthLoadingProvider});this.components.push(d),a.appendChild(d.element);const h=n.signUp.passwordPlaceholder||n.signUp.passwordLabel,m=new A({type:"password",name:"password",label:n.signUp.passwordLabel,placeholder:h,value:s.data.password||"",autocomplete:"new-password",required:!0,disabled:!!s.oauthLoadingProvider});this.components.push(m),a.appendChild(m.element);const g=n.signUp.confirmPasswordPlaceholder||n.signUp.confirmPasswordLabel,E=new A({type:"password",name:"confirmPassword",label:n.signUp.confirmPasswordLabel,placeholder:g,value:s.data.confirmPassword||"",autocomplete:"new-password",required:!0,disabled:!!s.oauthLoadingProvider});this.components.push(E),a.appendChild(E.element),r.appendChild(a);const w=new $({text:n.signUp.signUpButton,onClick:async()=>{this.options.onStateChange({data:{...s.data,email:d.getValue(),password:m.getValue(),confirmPassword:E.getValue()}}),await this.options.onAction("signUp")},variant:"primary",fullWidth:!0,loading:s.loading,disabled:!!s.oauthLoadingProvider});this.components.push(w),r.appendChild(w.element);const p=Oe(o);if(de(o)&&p.length>0){const f=new Be(n.common.orText);this.components.push(f),r.appendChild(f.element)}if(p.length>0){const f=document.createElement("div");f.className=u.providers,p.forEach(_=>{const v=new $e({id:_.id,name:_.id,enabled:_.enabled},n.oauth,async()=>{await this.options.onAction("oauthSignIn",{provider:_.id})});s.oauthLoadingProvider===_.id&&v.setLoadingState(!0),this.components.push(v),f.appendChild(v.element)}),r.appendChild(f)}const y=document.createElement("div");y.className=u.footer;const C=document.createElement("span");C.className=u.footerText,n.signUp.toggleToSignIn&&C.append(document.createTextNode(`${n.signUp.toggleToSignIn} `));const b=document.createElement("a");return b.className=u.link,b.textContent=n.signUp.toggleToSignInLink||"Sign in now.",b.href="#",b.addEventListener("click",f=>{f.preventDefault(),this.options.onAction("switchToSignIn")}),C.appendChild(b),y.appendChild(C),r.appendChild(y),e.appendChild(r),e}buildVerifyEmailView(){const e=document.createElement("div"),{labels:n,state:s}=this.options,o=new j({title:n.verifyEmail.title,subtitle:n.verifyEmail.subtitle||n.verifyEmail.checkInbox});this.components.push(o),e.appendChild(o.element);const i=document.createElement("div");i.className=u.emailIcon;const r=document.createElement("div");r.style.width="50px",r.style.height="10px",r.style.backgroundImage=`url("data:image/svg+xml,%3Csvg width='50' height='10' viewBox='0 0 50 10' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Ccircle cx='5' cy='5' r='2' fill='%23D1D5DB'/%3E%3Ccircle cx='25' cy='5' r='2' fill='%23D1D5DB'/%3E%3Ccircle cx='45' cy='5' r='2' fill='%23D1D5DB'/%3E%3C/svg%3E")`,r.style.backgroundRepeat="no-repeat",r.style.backgroundPosition="center",i.appendChild(r);const l=document.createElementNS("http://www.w3.org/2000/svg","svg");l.setAttribute("xmlns","http://www.w3.org/2000/svg"),l.setAttribute("width","59"),l.setAttribute("height","48"),l.setAttribute("viewBox","0 0 59 48"),l.setAttribute("fill","none"),l.style.flexShrink="0";const a=document.createElementNS("http://www.w3.org/2000/svg","path");a.setAttribute("d","M5.33333 6.66667V2.64907C5.33333 1.18603 6.54749 0 7.97813 0H56.0219C57.4827 0 58.6667 1.18653 58.6667 2.64907V45.3509C58.6667 46.8139 57.4525 48 56.0219 48H7.97813C6.51747 48 5.33333 46.8136 5.33333 45.3509V42.6667H53.3333V11.4667L32 30.6667L5.33333 6.66667ZM0 18.6667H13.3333V24H0V18.6667ZM0 32H21.3333V37.3333H0V32Z"),a.setAttribute("fill","black"),a.setAttribute("fill-opacity","0.06"),l.appendChild(a),i.appendChild(l);const c=document.createElement("div");c.style.width="50px",c.style.height="10px",c.style.backgroundImage=`url("data:image/svg+xml,%3Csvg width='50' height='10' viewBox='0 0 50 10' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Ccircle cx='5' cy='5' r='2' fill='%23D1D5DB'/%3E%3Ccircle cx='25' cy='5' r='2' fill='%23D1D5DB'/%3E%3Ccircle cx='45' cy='5' r='2' fill='%23D1D5DB'/%3E%3C/svg%3E")`,c.style.backgroundRepeat="no-repeat",c.style.backgroundPosition="center",i.appendChild(c),e.appendChild(i);const d=document.createElement("div");d.className=u.section;const h=new $({text:n.verifyEmail.resendButton,onClick:async()=>{await this.options.onAction("resendVerificationEmail")},variant:"oauth",disabled:!!s.resendCountdown,fullWidth:!0,loading:s.loading}),m=h.element.querySelector("span");if(m&&(m.classList.add("edgespark-auth__countdown-text"),s.resendCountdown)){const g=(n.verifyEmail.resendButtonWithCountdown||n.verifyEmail.resendButton).replace("{seconds}",String(s.resendCountdown));m.textContent=g}return this.components.push(h),d.appendChild(h.element),e.appendChild(d),e}buildVerifyCodeView(){const e=document.createElement("div"),{labels:n,state:s}=this.options,o=s.data.email||"",i=new j({title:n.verifyCode.title,subtitle:`${n.verifyCode.sentTo} ${o}`,highlightedText:o});this.components.push(i),e.appendChild(i.element);const r=new De({length:6,value:s.data.code||"",onChange:h=>{this.options.onStateChange({data:{...s.data,code:h}})},onComplete:async h=>{this.options.onStateChange({data:{...s.data,code:h}}),await this.options.onAction("verifyCode")},error:!!s.error,disabled:s.loading});this.components.push(r),e.appendChild(r.element);const l=new W({message:s.errorMessage||"",visible:!!s.error});this.components.push(l),e.appendChild(l.element);const a=new $({text:n.verifyCode.verifyButton,onClick:async()=>{await this.options.onAction("verifyCode")},variant:"primary",fullWidth:!0,loading:s.loading});this.components.push(a),e.appendChild(a.element);const c=document.createElement("div");c.className=u.footer;const d=new $({text:s.resendCountdown?n.verifyCode.resendCountdown.replace("{seconds}",String(s.resendCountdown)):n.verifyCode.resendCode,onClick:async()=>{await this.options.onAction("resendCode")},variant:"oauth",fullWidth:!0,disabled:!!s.resendCountdown});return this.components.push(d),c.appendChild(d.element),e.appendChild(c),e}buildResetPasswordView(){const e=document.createElement("div"),{labels:n,state:s}=this.options,o=new j({title:n.resetPassword.title,subtitle:n.resetPassword.subtitle});s.error&&o.element.classList.add("has-error-below"),this.components.push(o),e.appendChild(o.element);const i=document.createElement("div");i.className=u.section,s.error&&i.classList.add("has-error");const r=new W({message:s.errorMessage||"",visible:!!s.error});this.components.push(r),i.appendChild(r.element);const l=document.createElement("div");l.className=u.fields;const a=new A({type:"email",name:"email",label:n.resetPassword.emailLabel,placeholder:n.resetPassword.emailLabel,value:s.data.email||"",autocomplete:"email",required:!0});this.components.push(a),l.appendChild(a.element);const c=new $({text:n.resetPassword.sendResetButton,onClick:async()=>{this.options.onStateChange({data:{...s.data,email:a.getValue()}}),await this.options.onAction("sendPasswordReset")},variant:"primary",fullWidth:!0,loading:s.loading});return this.components.push(c),l.appendChild(c.element),i.appendChild(l),e.appendChild(i),e}buildSetNewPasswordView(){const e=document.createElement("div"),{labels:n,state:s}=this.options,o=s.data.email||"",i=new j({title:n.setNewPassword.title,subtitle:n.setNewPassword.subtitle||"A code has send to"}),r=i.element.querySelector(`.${u.headerSubtitle}`);if(r){r.innerHTML="",r.append(document.createTextNode(`${n.setNewPassword.subtitle||"A code has send to"} `));const E=document.createElement("span");E.className=u.highlight,E.textContent=`${o}`,r.appendChild(E),r.append(document.createTextNode(". "));const w=document.createElement("span");w.className="edgespark-auth__countdown-text";const p=s.resendCountdown;if(p!=null&&p>0){const y=Math.floor(p/60),C=p%60,b=`${String(y).padStart(2,"0")}:${String(C).padStart(2,"0")}`;w.textContent=`Resend in ${b}`}else{w.textContent="";const y=document.createElement("a");y.className=u.link,y.textContent=n.setNewPassword.resendCode||"Resend",y.href="#",y.addEventListener("click",async C=>{C.preventDefault(),await this.options.onAction("resendPasswordResetCode")}),w.appendChild(y)}r.appendChild(w)}s.error&&i.element.classList.add("has-error-below"),this.components.push(i),e.appendChild(i.element);const l=document.createElement("div");l.className=u.section,s.error&&l.classList.add("has-error");const a=new W({message:s.errorMessage||"",visible:!!s.error});this.components.push(a),l.appendChild(a.element);const c=new De({length:6,value:s.data.code||"",onChange:E=>{this.options.onStateChange({data:{...s.data,code:E}})},onComplete:E=>{this.options.onStateChange({data:{...s.data,code:E}})}});this.components.push(c),l.appendChild(c.element);const d=document.createElement("div");d.className=u.fields;const h=new A({type:"password",name:"password",label:n.setNewPassword.newPasswordLabel,placeholder:n.setNewPassword.newPasswordLabel,value:s.data.password||"",autocomplete:"new-password",required:!0});this.components.push(h),d.appendChild(h.element);const m=new A({type:"password",name:"confirmPassword",label:n.setNewPassword.confirmPasswordLabel,placeholder:n.setNewPassword.confirmPasswordLabel,value:s.data.confirmPassword||"",autocomplete:"new-password",required:!0});this.components.push(m),d.appendChild(m.element),l.appendChild(d);const g=new $({text:n.setNewPassword.setPasswordButton,onClick:async()=>{this.options.onStateChange({data:{...s.data,code:c.getValue(),password:h.getValue(),confirmPassword:m.getValue()}}),await this.options.onAction("setNewPassword")},variant:"primary",fullWidth:!0,loading:s.loading});return this.components.push(g),l.appendChild(g.element),e.appendChild(l),e}buildChangePasswordView(){const e=document.createElement("div"),{labels:n,state:s}=this.options,o=new j({title:n.changePassword.title});this.components.push(o),e.appendChild(o.element);const i=document.createElement("div");i.className=u.fields;const r=new A({type:"password",name:"currentPassword",label:n.changePassword.currentPasswordLabel,value:s.data.currentPassword||"",autocomplete:"current-password",required:!0});this.components.push(r),i.appendChild(r.element);const l=new A({type:"password",name:"newPassword",label:n.changePassword.newPasswordLabel,value:s.data.newPassword||"",autocomplete:"new-password",required:!0});this.components.push(l),i.appendChild(l.element);const a=new A({type:"password",name:"confirmPassword",label:n.changePassword.confirmPasswordLabel,value:s.data.confirmPassword||"",autocomplete:"new-password",required:!0});this.components.push(a),i.appendChild(a.element),e.appendChild(i);const c=new W({message:s.errorMessage||"",visible:!!s.error});this.components.push(c),e.appendChild(c.element);const d=new $({text:n.changePassword.changeButton,onClick:async()=>{this.options.onStateChange({data:{...s.data,currentPassword:r.getValue(),newPassword:l.getValue(),confirmPassword:a.getValue()}}),await this.options.onAction("changePassword")},variant:"primary",fullWidth:!0,loading:s.loading});return this.components.push(d),e.appendChild(d.element),e}buildSuccessView(){const e=document.createElement("div"),{labels:n,state:s}=this.options,o=s.data.successType||"sign-in";let i,r,l,a;switch(o){case"password-changed":i=n.success.passwordChanged||"Password Updated",r=n.success.passwordChangedMessage||"You can now sign in with your new password.",l=n.success.backToSignIn||"Back to Sign In",a="switchToSignIn";break;case"password-reset":i=n.success.passwordReset||"Password Reset",r=n.success.passwordResetMessage||"Your password has been reset successfully.",l=n.success.continueButton,a="switchToSignIn";break;case"email-verified":i=n.success.emailVerified||"Email Verified",r=n.success.emailVerifiedMessage||"Your email has been verified successfully.",l=n.success.continueButton,a="continue";break;case"sign-up":i=n.success.title,r=n.success.signUpComplete,l=n.success.continueButton,a="continue";break;default:i=n.success.title,r=n.success.signInComplete,l=n.success.continueButton,a="continue"}const c=new j({title:i,subtitle:r});s.error&&c.element.classList.add("has-error-below"),this.components.push(c),e.appendChild(c.element);const d=document.createElement("div");d.className=u.section;const h=new $({text:l,onClick:()=>{this.options.onAction(a)},variant:"primary",fullWidth:!0});return this.components.push(h),d.appendChild(h.element),e.appendChild(d),e}cleanup(){this.components.forEach(e=>{if(e&&typeof e.destroy=="function")try{e.destroy()}catch(n){console.error("Component cleanup error:",n)}}),this.components=[]}}const me={common:{orText:"OR",loadingText:"Loading...",requiredError:"This field is required",unknownError:"Something went wrong",backButton:"Back",continueButton:"Continue",confirmButton:"Confirm"},signIn:{title:"Welcome",subtitle:"Sign in to Continue",emailLabel:"Email",emailPlaceholder:"Enter your email",passwordLabel:"Password",passwordPlaceholder:"Enter your password",loginButton:"Continue with email",forgotPassword:"Forget Password",toggleToSignUp:"Sign up now",emailOnlyButton:"Continue with email",signUpPrompt:"Don’t have an account?",guestPrompt:"Not ready to sign up yet?",guestLinkText:"Continue with Temporary Account"},signUp:{title:"Welcome",subtitle:"Sign up to Continue",nameLabel:"Name",emailLabel:"Email",emailPlaceholder:"Enter your email",passwordLabel:"Password",passwordPlaceholder:"Enter new password",confirmPasswordLabel:"Confirm Password",confirmPasswordPlaceholder:"Confirm new password",signUpButton:"Continue with email",toggleToSignIn:"Already have an account?",toggleToSignInLink:"Sign in now."},verifyEmail:{title:"Check Your Inbox",subtitle:"We've sent a sign-in link to your email. Click it to get started.",sentTo:"We sent an email to",checkInbox:"Check your inbox and click the verification link to continue",notReceived:"Didn't receive the email?",resendButton:"Resend Email",resendButtonWithCountdown:"Resend Email ({seconds}s)",changeEmail:"Change email address",emailSent:"Verification email sent successfully"},verifyCode:{title:"Enter verification code",sentTo:"We sent a verification code to",codeLabel:"Verification code",verifyButton:"Verify",invalidCode:"Invalid verification code",codeExpired:"Verification code has expired",resendCode:"Resend code",resendCountdown:"Resend in {seconds}s",codeSent:"Verification code sent successfully"},resetPassword:{title:"Reset password",subtitle:"Enter your email to receive reset instructions",emailLabel:"Email",sendResetButton:"Send reset link",backToSignIn:"Back to sign in",emailSent:"Password reset email sent",instructions:"We'll send you an email with instructions to reset your password"},setNewPassword:{title:"Set New Password",subtitle:"A code has send to",newPasswordLabel:"Enter new password",confirmPasswordLabel:"Confirm new password",setPasswordButton:"Set New Password",resendCode:"Resend",resendCountdown:"Resend in {seconds}"},changePassword:{title:"Change password",currentPasswordLabel:"Current password",newPasswordLabel:"New password",confirmPasswordLabel:"Confirm new password",changeButton:"Change password"},errors:{INVALID_EMAIL:"Invalid email",INVALID_CODE:"Invalid verification code",CODE_EXPIRED:"Verification code expired",PASSWORD_MISMATCH:"Passwords do not match",GENERIC_ERROR:"Something went wrong",USER_NOT_FOUND:"User not found",FAILED_TO_CREATE_USER:"Failed to create user",FAILED_TO_CREATE_SESSION:"Failed to create session",FAILED_TO_UPDATE_USER:"Failed to update user",FAILED_TO_GET_SESSION:"Failed to get session",INVALID_PASSWORD:"Invalid password",INVALID_EMAIL_OR_PASSWORD:"Invalid email or password",SOCIAL_ACCOUNT_ALREADY_LINKED:"Social account already linked",PROVIDER_NOT_FOUND:"Provider not found",INVALID_TOKEN:"Invalid token",ID_TOKEN_NOT_SUPPORTED:"id_token not supported",FAILED_TO_GET_USER_INFO:"Failed to get user info",USER_EMAIL_NOT_FOUND:"User email not found",EMAIL_NOT_VERIFIED:"Email not verified",PASSWORD_TOO_SHORT:"Password too short",PASSWORD_TOO_LONG:"Password too long",USER_ALREADY_EXISTS:"User already exists",USER_ALREADY_EXISTS_USE_ANOTHER_EMAIL:"User already exists. Use another email.",EMAIL_CAN_NOT_BE_UPDATED:"Email can not be updated",CREDENTIAL_ACCOUNT_NOT_FOUND:"Credential account not found",SESSION_EXPIRED:"Session expired. Re-authenticate to perform this action.",FAILED_TO_UNLINK_LAST_ACCOUNT:"You can't unlink your last account",ACCOUNT_NOT_FOUND:"Account not found",USER_ALREADY_HAS_PASSWORD:"User already has a password. Provide that to delete the account.",TOO_MANY_ATTEMPTS:"Too many attempts. Try again later."},oauth:{buttonTextPrefix:"Continue with",googleBtnName:"Continue with Google",githubBtnName:"Continue with GitHub"},success:{title:"Success!",signUpComplete:"Your account has been created successfully",signInComplete:"Welcome back!",passwordReset:"Password reset successfully",passwordResetMessage:"Your password has been reset successfully.",passwordChanged:"Password Updated",passwordChangedMessage:"You can now sign in with your new password.",emailVerified:"Email verified successfully",emailVerifiedMessage:"Your email has been verified successfully.",continueButton:"Continue",backToSignIn:"Back to Sign In"},iframeModal:{titleTemplate:"Sign in with {provider}",messageTemplate:"{provider} sign-up needs to be completed in a new tab due to preview page limitations.",actionButton:"Preview in New Tab"}};function ts(t,e){return e?{common:{...t.common,...e.common},signIn:{...t.signIn,...e.signIn},signUp:{...t.signUp,...e.signUp},verifyEmail:{...t.verifyEmail,...e.verifyEmail},verifyCode:{...t.verifyCode,...e.verifyCode},resetPassword:{...t.resetPassword,...e.resetPassword},setNewPassword:{...t.setNewPassword,...e.setNewPassword},changePassword:{...t.changePassword,...e.changePassword},errors:{...t.errors,...e.errors},oauth:{...t.oauth,...e.oauth},success:{...t.success,...e.success},iframeModal:{...t.iframeModal,...e.iframeModal}}:t}class ns{constructor(e){this.container=e.container,this.labels=ts(me,e.labels||{}),this.config=e.config,this.authClient=e.authClient,this.onLogin=e.onLogin,this.onError=e.onError,this.redirects=e.redirects,this.onAuthStateChange=e.onAuthStateChange}render(){if(!(this.container instanceof HTMLElement))throw q("UI_INVALID_CONTAINER","Container must be an HTMLElement");this.container.innerHTML="";const e=document.createElement("div");e.setAttribute(tt,""),this.root=e,this.container.appendChild(e),this.flowManager=new Qn({authClient:this.authClient,config:this.config,labels:this.labels,onLogin:this.onLogin,onError:this.onError,redirects:this.redirects,onAuthStateChange:this.onAuthStateChange}),this.viewFactory=new Ve({labels:this.labels,config:this.config,state:this.flowManager.getState(),onAction:this.handleAction.bind(this),onStateChange:n=>{n.data&&this.flowManager.updateData(n.data)}}),this.lastState=this.flowManager.getState(),this.unsubscribe=this.flowManager.subscribe(n=>{if(this.isCountdownOnlyChange(n)){this.updateCountdownDisplay(n.resendCountdown),this.lastState=n;return}this.lastState=n,this.renderView()}),this.renderView(),this.onAuthStateChange&&(this.tokenUnsubscribe=this.onAuthStateChange(async()=>{var n;try{const s=await this.authClient.getSession();(n=s?.data)!=null&&n.user&&this.onLogin&&this.onLogin(s.data.user)}catch{}}))}renderView(){if(!this.root)return;const e=this.flowManager.getState(),n=document.activeElement;let s=null;if(n&&this.root.contains(n)){const r=n;if(s={name:r.name,type:r.type},r.classList.contains(u.codeInputDigit)){const l=r.closest(`.${u.codeInput}`);if(l){const a=l.querySelectorAll(`.${u.codeInputDigit}`);s.index=Array.from(a).indexOf(r)}}}this.root.innerHTML="";const o=document.createElement("div");o.className=u.root,this.viewFactory=new Ve({labels:this.labels,config:this.config,state:e,onAction:this.handleAction.bind(this),onStateChange:r=>{r.data&&this.flowManager.updateData(r.data)}});const i=this.viewFactory.createView();if(o.appendChild(i),this.root.appendChild(o),e.flow==="sign-in"&&this.config.enableAnonymous){const r=document.createElement("div");r.className=u.guestLink;const l=this.labels.signIn.guestPrompt||me.signIn.guestPrompt,a=this.labels.signIn.guestLinkText||me.signIn.guestLinkText;l&&r.append(document.createTextNode(`${l} `));const c=document.createElement("a");c.className=u.link,c.textContent=a,c.href="#",c.addEventListener("click",async d=>{d.preventDefault();const h=this.flowManager.getState();h.loading||h.oauthLoadingProvider||h.anonymousLoading||await this.handleAction("signInAnonymous")}),r.appendChild(c),this.root.appendChild(r)}s&&setTimeout(()=>{var r,l;let a=null;if(s?.index!==void 0){const c=(r=this.root)==null?void 0:r.querySelector(`.${u.codeInput}`);if(c){const d=c.querySelectorAll(`.${u.codeInputDigit}`);d[s.index]&&(a=d[s.index])}}else if(s!=null&&s.name){const c=(l=this.root)==null?void 0:l.querySelector(`input[name="${s.name}"][type="${s.type}"]`);c&&(a=c)}if(a&&(a.focus(),a instanceof HTMLInputElement)){const c=a.value.length;a.setSelectionRange(c,c)}},0)}updateCountdownDisplay(e){var n;if(!this.root)return;const s=this.flowManager.getState(),o=this.root.querySelector(".edgespark-auth__countdown-text");if(o){if(s.flow==="verify-email"){const i=this.root.querySelector(".edgespark-auth__btn--oauth");if(e!==void 0&&e>0){const r=((n=this.labels.verifyEmail.resendButtonWithCountdown)==null?void 0:n.replace("{seconds}",String(e)))||`Resend Email (${e}s)`;o.textContent=r,i&&i.setAttribute("disabled","true")}else o.textContent=this.labels.verifyEmail.resendButton,i&&i.removeAttribute("disabled");return}if(e!==void 0&&e>0){const i=Math.floor(e/60),r=e%60,l=`${String(i).padStart(2,"0")}:${String(r).padStart(2,"0")}`;s.flow==="set-new-password"?o.textContent=`Resend in ${l}`:s.flow==="verify-code"&&(o.textContent=this.labels.verifyCode.resendCountdown.replace("{seconds}",String(e)))}else{o.innerHTML="";const i=document.createElement("a");i.className=u.link,s.flow==="set-new-password"?i.textContent=this.labels.setNewPassword.resendCode||"Resend":s.flow==="verify-code"&&(i.textContent=this.labels.verifyCode.resendCode),i.href="#",i.addEventListener("click",async r=>{r.preventDefault(),s.flow==="set-new-password"?await this.handleAction("resendPasswordResetCode"):s.flow==="verify-code"&&await this.handleAction("resendCode")}),o.appendChild(i)}}}async handleAction(e,n){var s,o,i;switch(e){case"signIn":await this.flowManager.handleSignIn();break;case"signUp":await this.flowManager.handleSignUp();break;case"oauthSignIn":await this.flowManager.handleOAuthSignIn(n.provider);break;case"switchToSignIn":this.flowManager.transitionTo("sign-in");break;case"switchToSignUp":this.flowManager.transitionTo("sign-up");break;case"switchToResetPassword":(o=(s=this.config.emailPassword)==null?void 0:s.config)!=null&&o.requirePasswordResetEmailVerification&&this.flowManager.transitionTo("reset-password");break;case"resendVerificationEmail":await this.flowManager.handleResendVerificationEmail(),this.flowManager.startResendCountdown(60);break;case"verifyCode":await this.flowManager.handleVerifyCode();break;case"resendCode":this.flowManager.startResendCountdown(60);break;case"sendPasswordReset":await this.flowManager.handleSendPasswordReset();break;case"setNewPassword":await this.flowManager.handleSetNewPassword();break;case"resendPasswordResetCode":await this.flowManager.handleResendPasswordResetCode();break;case"changePassword":await this.flowManager.handleChangePassword(n?.revokeOtherSessions);break;case"continue":(i=this.onLogin)==null||i.call(this,{action:"continue"});break;case"signInAnonymous":await this.flowManager.handleAnonymousSignIn();break;default:console.warn("Unknown action:",e)}}switchFlow(e){this.flowManager.transitionTo(e)}getCurrentFlow(){return this.flowManager.getState().flow}destroy(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=void 0),this.tokenUnsubscribe&&(this.tokenUnsubscribe(),this.tokenUnsubscribe=void 0),this.viewFactory&&this.viewFactory.cleanup(),this.root&&this.root.parentElement&&this.root.parentElement.removeChild(this.root)}isCountdownOnlyChange(e){return this.lastState?this.shallowEqualStateExceptCountdown(this.lastState,e)&&this.lastState.resendCountdown!==e.resendCountdown:!1}shallowEqualStateExceptCountdown(e,n){const{resendCountdown:s,...o}=e,{resendCountdown:i,...r}=n;return this.shallowEqual(o,r)}shallowEqual(e,n){const s=Object.keys(e),o=Object.keys(n);if(s.length!==o.length)return!1;for(const i of s)if(e[i]!==n[i])return!1;return!0}}class ss{constructor(e){this.root=null,this.container=e.container}render(){this.container.innerHTML="";const e=document.createElement("div");e.setAttribute(tt,""),this.root=e;const n=document.createElement("div");n.className=u.skeleton;const s=document.createElement("div");s.className=`${u.skeletonItem} ${u.skeletonTitle}`,n.appendChild(s);const o=document.createElement("div");o.className=`${u.skeletonItem} ${u.skeletonSubtitle}`,n.appendChild(o);for(let r=0;r<2;r++){const l=document.createElement("div");l.className=`${u.skeletonItem} ${u.skeletonInput}`,n.appendChild(l)}const i=document.createElement("div");i.className=`${u.skeletonItem} ${u.skeletonButton}`,n.appendChild(i),e.appendChild(n),this.container.appendChild(e)}destroy(){this.root&&this.root.parentElement&&this.root.parentElement.removeChild(this.root),this.root=null}}function os(t,e){return Tn(t,e)}function is(t,e){try{const n=new URL(t);return n.searchParams.has(e)?(n.searchParams.delete(e),n.search=n.searchParams.toString(),n.toString()):t}catch{return null}}const je="es_auth_token";function rs(t){const{baseUrl:e,fetchCredentials:n="include"}=t;if(!e)throw new Error("[EdgeSpark] baseUrl is required");const s=new URL(e).origin,o=Ze({persist:"local"});if(typeof window<"u"){const w=os(window.location.href,je);if(w){o.setToken(w,s);const p=is(window.location.href,je);p&&p!==window.location.href&&window.history.replaceState(null,"",p)}}const i=nt({tokenStore:o,baseOrigin:s}),r=[cn()],l=ln({baseURL:e,basePath:re,plugins:r,fetchOptions:{credentials:n,auth:{type:"Bearer",token:()=>o.getToken(s)||void 0},customFetchImpl:i}});let a=null,c=null;const d=async()=>(a||(a=Gn(e).then(Hn)),a),h=(w={})=>{let p;return w.redirects?p=w.redirects:w.redirectTo&&(p={oauth:{success:w.redirectTo,newUser:w.redirectTo,error:w.redirectTo},emailPassword:w.redirectTo,emailVerification:w.redirectTo,anonymous:w.redirectTo}),{labels:w.labels,redirects:p,onLogin:w.onLogin,onError:w.onError}},m={renderAuthUI:async(w,p={})=>{var y;if(!(w instanceof HTMLElement))throw new Error("[EdgeSpark] Container must be an HTMLElement");c?.destroy();const C=new ss({container:w});C.render();try{const b=await d();C.destroy(),c=new ns({container:w,labels:p.labels||{},config:b,authClient:l,onAuthStateChange:f=>o.subscribe(f,s),...h(p)}),c.render()}catch(b){throw C.destroy(),(y=p.onError)==null||y.call(p,b),b}},onAuthStateChange:w=>o.subscribe(w,s)},g=new Proxy(l,{get(w,p,y){return p in m?m[p]:Reflect.get(w,p,y)}}),E={fetch:Dn({baseUrl:e,fetchCredentials:n})};return{auth:g,api:E,destroy:w=>{c?.destroy(),c=null,a=null,w!=null&&w.clearToken&&o.clear(s)}}}const as={isProduction:window.location.hostname==="shirazstore.shop",isStaging:window.location.hostname.includes("staging")||window.location.hostname.includes("pages.dev")},ls={baseUrl:as.isProduction?"https://lujlgtmiqfc8uzc6ury0.youbase.cloud":"https://staging--lujlgtmiqfc8uzc6ury0.youbase.cloud"};function cs(t){return t?(typeof t=="number"?new Date(t*1e3):new Date(t)).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-"}const it=rs({baseUrl:ls.baseUrl}),qe={en:{nav_language:"Language",nav_support:"Support",nav_admin:"Admin",nav_order:"Your Order",hero_eyebrow:"Education Store",hero_title:"Education Pricing & Student Discounts.",hero_desc:"Save on Mac and iPad for your studies. Plus get AppleCare+ at a discount. Available for current and newly accepted university students and their parents, as well as faculty, staff, and homeschool teachers of all grade levels.",track_title:"Track your order.",track_desc:"Check order status, track package delivery, or view your order history.",track_link:"Go to your order",shop_title:"Shop for University.",footer_tax:"Prices are inclusive of tax where applicable. *Quantity limits apply. Visit the Sales & Refund Policy for full terms and conditions.",footer_copy:"© 2025 Shiraz Apple Store. All rights reserved. Shah Alam, Selangor.",signin_title:"Sign in to track.",signin_desc:"View your order details, status, and delivery timeline.",signin_btn:"Sign In",profile_title:"My Profile",profile_fav:"Favourites",profile_orders:"Orders",profile_account:"Account",profile_signin:"Sign in"},ms:{nav_language:"Bahasa",nav_support:"Sokongan",nav_admin:"Admin",nav_order:"Pesanan Anda",hero_eyebrow:"Kedai Pendidikan",hero_title:"Harga Pendidikan & Diskaun Pelajar.",hero_desc:"Jimat pada Mac dan iPad untuk pengajian anda. Serta dapatkan AppleCare+ dengan diskaun. Tersedia untuk pelajar universiti semasa dan yang baru diterima serta ibu bapa mereka, juga fakulti, kakitangan, dan guru homeschool semua peringkat.",track_title:"Jejak pesanan anda.",track_desc:"Semak status pesanan, jejak penghantaran pakej, atau lihat sejarah pesanan anda.",track_link:"Pergi ke pesanan anda",shop_title:"Beli untuk Universiti.",footer_tax:"Harga termasuk cukai jika berkenaan. *Had kuantiti dikenakan. Lawati Polisi Jualan & Bayaran Balik untuk terma dan syarat penuh.",footer_copy:"© 2025 Shiraz Apple Store. Hak cipta terpelihara. Shah Alam, Selangor.",signin_title:"Log masuk untuk menjejak.",signin_desc:"Lihat butiran pesanan, status, dan garis masa penghantaran anda.",signin_btn:"Log Masuk",profile_title:"Profil Saya",profile_fav:"Kegemaran",profile_orders:"Pesanan",profile_account:"Akaun",profile_signin:"Log masuk"}};document.addEventListener("DOMContentLoaded",async()=>{const t=window.location.pathname,e=t.includes("/tracking"),n=t.includes("/admin"),s=!e&&!n,o=localStorage.getItem("shiraz_lang")||"en";changeLanguage(o);const i=document.querySelector(".mobile-menu-btn");i&&i.addEventListener("click",r=>{r.stopPropagation(),window.toggleMobileMenu()}),s?await rt():e&&at()});window.changeLanguage=function(t){localStorage.setItem("shiraz_lang",t),document.querySelectorAll("[data-lang-key]").forEach(s=>{const o=s.getAttribute("data-lang-key");qe[t][o]&&(s.textContent=qe[t][o])});const n=document.getElementById("langBtn");n&&(n.textContent=t==="en"?"English":"Bahasa Melayu")};window.toggleLangMenu=function(){document.getElementById("langMenu").classList.toggle("show")};window.toggleMobileMenu=function(){const t=document.getElementById("mainNav");t&&(t.classList.toggle("mobile-open"),console.log("Mobile menu toggled:",t.classList.contains("mobile-open")))};window.onclick=function(t){if(!t.target.matches(".lang-btn")){const e=document.getElementsByClassName("lang-content");for(let n=0;n<e.length;n++){const s=e[n];s.classList.contains("show")&&s.classList.remove("show")}}};async function rt(){const t=document.getElementById("devicesGrid"),e=document.getElementById("devicesLoading");if(t)try{const s=await(await it.api.fetch("/api/public/devices")).json();e&&e.remove();const o=s.success?s.data:[];if(!o||o.length===0){t.innerHTML=`
        <div style="text-align: center; width: 100%; grid-column: 1/-1; padding: 40px; color: var(--text-secondary);">
          <i class="fas fa-mobile-alt" style="font-size: 24px; margin-bottom: 10px;"></i>
          <p>No devices available</p>
        </div>
      `;return}t.innerHTML=o.map((i,r)=>`
      <div class="device-card animate-fade-up" style="animation-delay: ${r*.1}s">
        <div class="device-image">
          ${i.imageUrl?`<img src="${i.imageUrl}" alt="${i.name}">`:'<i class="fas fa-mobile-alt" style="font-size: 48px; color: var(--text-secondary);"></i>'}
        </div>
        <div class="device-content" style="width: 100%;">
          <div class="device-model">Device Model</div>
          <h3 class="device-name">${i.name}</h3>
          <p class="device-description">${i.description}</p>
          <div style="margin-top: 16px;">
            <span class="spec-tag">Color: ${i.color}</span>
            <span class="spec-tag">Storage: ${i.storage}</span>
            ${i.price?`<span class="spec-tag">Price: ${i.price}</span>`:""}
            <span class="spec-tag">Qty: ${i.quantity||"1"}</span>
          </div>
        </div>
      </div>
    `).join("")}catch(n){console.error("Failed to load devices:",n),e&&e.remove(),t.innerHTML=`
      <div style="text-align: center; width: 100%; grid-column: 1/-1; padding: 40px; color: var(--text-secondary);">
        <i class="fas fa-exclamation-triangle" style="font-size: 24px; margin-bottom: 10px;"></i>
        <p>Failed to load devices</p>
      </div>
    `}}function at(){const e=new URLSearchParams(window.location.search).get("track");if(e){const n=document.getElementById("trackingInput");n&&(n.value=e)}}let ge;window.trackOrder=async function(t,e){const n=document.getElementById("signInSection"),s=document.getElementById("trackingSection"),o=document.getElementById("loadingState"),i=document.getElementById("errorState"),r=document.getElementById("resultsState"),l=document.getElementById("trackBtn");n.classList.add("hidden"),s.classList.remove("hidden"),o.classList.remove("hidden"),i.classList.add("hidden"),r.classList.add("hidden"),l&&(l.disabled=!0,l.innerHTML="Signing In..."),ge&&clearInterval(ge),await Ge(t,e,!0),ge=setInterval(()=>{Ge(t,e,!1)},3e4)};async function Ge(t,e,n){const s=document.getElementById("loadingState"),o=document.getElementById("errorState"),i=document.getElementById("trackBtn");try{const l=await(await it.api.fetch("/api/public/order-access",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,reference:e})})).json();if(!l.success)throw new Error(l.message||"Order not found");ds(l.data)}catch(r){console.error("Tracking error:",r),n&&(s.classList.add("hidden"),o.classList.remove("hidden"),document.getElementById("errorMessage").textContent=r.message,i&&(i.disabled=!1,i.innerHTML="Sign In"))}}function ds(t){const e=document.getElementById("loadingState"),n=document.getElementById("resultsState");e.classList.add("hidden"),n.classList.remove("hidden");const s=t.order,o=s.device;document.getElementById("orderNumber").textContent=s.orderNumber;const i=document.getElementById("orderStatus");i.textContent=s.status.charAt(0).toUpperCase()+s.status.slice(1),document.getElementById("deviceName").textContent=o?o.name:"Unknown Device",document.getElementById("customerName").textContent=s.customerName,document.getElementById("shippingAddress").textContent=s.shippingAddress,document.getElementById("specifications").textContent=`${s.color||"N/A"} | ${s.storage||"N/A"} | Qty: ${s.quantity}`;const r=document.getElementById("timeline"),l=document.getElementById("noEvents");!t.timeline||t.timeline.length===0?(r.innerHTML="",l?.classList.remove("hidden")):(l?.classList.add("hidden"),r.innerHTML=t.timeline.map((a,c)=>`
      <div style="position: relative; padding-bottom: 30px;">
        <div style="position: absolute; left: -26px; top: 4px; width: 12px; height: 12px; border-radius: 50%; background: ${c===0?"var(--primary-color)":"var(--border-color)"}; border: 2px solid var(--bg-primary);"></div>
        <div style="font-size: 12px; color: var(--text-secondary); margin-bottom: 4px;">${cs(a.timestamp)}</div>
        <div style="font-weight: 600; margin-bottom: 4px;">${a.location}</div>
        <div style="font-size: 14px; color: var(--text-primary);">${a.description}</div>
      </div>
    `).join(""))}window.loadDevices=rt;window.initTrackingPage=at;export{ls as A,rs as c,cs as f};
